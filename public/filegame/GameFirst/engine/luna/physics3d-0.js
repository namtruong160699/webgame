(function(t){"use strict";var i;void 0===i&&(i=function(){}),i.p=""}).call(this||window,window.__wpcc=window.__wpcc||{}),function(t){"use strict";var i=function(t=-0,i=-0,a=-0){this.x=t,this.y=i,this.z=a},a=function(t,i,a){t.x=i.x+a.x,t.y=i.y+a.y,t.z=i.z+a.z},n=function(t,i,a){t.x=i.x-a.x,t.y=i.y-a.y,t.z=i.z-a.z},e=function(t,i,a){t.x=i.x*a,t.y=i.y*a,t.z=i.z*a},s=function(t){return t.x*t.x+t.y*t.y+t.z*t.z},h=function(t,i,a=1e-5){return t.l(i),t.normalize(a)},o=function(t,i){const a=t.x,n=t.y,e=t.z;t.x=n*i.z-e*i.y,t.y=e*i.x-a*i.z,t.z=a*i.y-n*i.x},r=function(t,i,a){const n=i.x,e=i.y;i=i.z;const s=a.x,h=a.y;a=a.z,t.x=e*a-i*h,t.y=i*s-n*a,t.z=n*h-e*s},f=function(t,i){const a=i.x-t.x,n=i.y-t.y;return a*a+n*n+(t=i.z-t.z)*t},c=function(t,i){return Math.sqrt(f(t,i))},l=function(t,i,a=1e-5){return Math.abs(t.x-i.x)<a&&Math.abs(t.y-i.y)<a&&Math.abs(t.z-i.z)<a},b=function(t=1e-5){return r(rn,us,ps),rn.V(t)},u=function(t=-0,i=-0,a=-0,n=1){this.x=t,this.y=i,this.z=a,this.w=n,this.normalize()},p=function(t,i,a=1e-5){return Math.abs(t.x-i.x)<a&&Math.abs(t.y-i.y)<a&&Math.abs(t.z-i.z)<a&&Math.abs(t.w-i.w)<a},y=function(){this.L=this.K=this.H=this.F=this.C=this.s=this.m=this.j=this.B=this.h=this.g=this.f=this.v=this.c=this.b=this.a=0},d=function(t){t.a=1,t.b=0,t.c=0,t.v=0,t.f=0,t.g=1,t.h=0,t.B=0,t.j=0,t.m=0,t.s=1,t.C=0,t.F=0,t.H=0,t.K=0,t.L=1},m=function(t,i){const a=i.x,n=i.y,e=i.z;i.x=t.a*a+t.b*n+t.c*e+t.v,i.y=t.f*a+t.g*n+t.h*e+t.B,i.z=t.j*a+t.m*n+t.s*e+t.C},w=function(t,i,a){a.x=t.a*i.x+t.b*i.y+t.c*i.z,a.y=t.f*i.x+t.g*i.y+t.h*i.z,a.z=t.j*i.x+t.m*i.y+t.s*i.z},g=function(t,i){const a=t.a,n=t.f,e=t.j,s=t.F,h=t.b,o=t.g,r=t.m,f=t.H,c=t.c,l=t.h,b=t.s,u=t.K,p=t.v,y=t.B,d=t.C,m=a*o-n*h,w=a*r-e*h,g=a*f-s*h,x=n*r-e*o,z=n*f-s*o,v=e*f-s*r,M=c*y-l*p,j=c*d-b*p,k=c*(t=t.L)-u*p,I=l*d-b*y,C=l*t-u*y,N=b*t-u*d;var O=m*N-w*C+g*I+x*k-z*j+v*M;O&&(O=1/O,i.a=(o*N-r*C+f*I)*O,i.f=(-n*N+e*C-s*I)*O,i.j=(y*v-d*z+t*x)*O,i.F=(-l*v+b*z-u*x)*O,i.b=(-h*N+r*k-f*j)*O,i.g=(a*N-e*k+s*j)*O,i.m=(-p*v+d*g-t*w)*O,i.H=(c*v-b*g+u*w)*O,i.c=(h*C-o*k+f*M)*O,i.h=(-a*C+n*k-s*M)*O,i.s=(p*z-y*g+t*m)*O,i.K=(-c*z+l*g-u*m)*O,i.v=(-h*I+o*j-r*M)*O,i.B=(a*I-n*j+e*M)*O,i.C=(-p*x+y*w-d*m)*O,i.L=(c*x-l*w+b*m)*O)},x=function(t,i,a){return t<i?i:t>a?a:t},z=function(){this.min=new i,this.max=new i},v=function(t,i,a){const n=i.min;i=i.max;const e=a.min;a=a.max,t.min.x=n.x<e.x?n.x:e.x,t.min.y=n.y<e.y?n.y:e.y,t.min.z=n.z<e.z?n.z:e.z,t.max.x=i.x>a.x?i.x:a.x,t.max.y=i.y>a.y?i.y:a.y,t.max.z=i.z>a.z?i.z:a.z},M=function(t){var i=Ur;t.min.add(i),t.max.add(i)},j=function(t,i){const a=t.min,n=i.min;return t=t.max,i=i.max,a.x<=i.x&&t.x>=n.x&&a.y<=i.y&&t.y>=n.y&&a.z<=i.z&&t.z>=n.z},k=function(t,i,a){return a<Number.EPSILON?j(t,i):Math.max(t.min.x-i.max.x,t.min.y-i.max.y,t.min.z-i.max.z,i.min.x-t.max.x,i.min.y-t.max.y,i.min.z-t.max.z)<a},I=function(t,i,a){let e=0;n(mn,a,i),a=mn.length(),mn.scale(1/a);var s=t.min.x,h=t.max.x;if(1e-5>Math.abs(mn.x)){if(i.x<s||i.x>h)return!1}else{var o=1/mn.x;if((s=(s-i.x)*o)>(h=(h-i.x)*o)&&(o=s,s=h,h=o),e=Math.max(e,s),e>(a=Math.min(a,h)))return!1}if(s=t.min.y,h=t.max.y,1e-5>Math.abs(mn.y)){if(i.y<s||i.y>h)return!1}else if(o=1/mn.y,(s=(s-i.y)*o)>(h=(h-i.y)*o)&&(o=s,s=h,h=o),e=Math.max(e,s),e>(a=Math.min(a,h)))return!1;if(s=t.min.z,h=t.max.z,1e-5>Math.abs(mn.z)){if(i.z<s||i.z>h)return!1}else if(t=1/mn.z,(s=(s-i.z)*t)>(i=(h-i.z)*t)&&(t=s,s=i,i=t),e=Math.max(e,s),e>(a=Math.min(a,i)))return!1;return!0},C=function(t,i,a){a.l(i),a.x=x(a.x,t.min.x,t.max.x),a.y=x(a.y,t.min.y,t.max.y),a.z=x(a.z,t.min.z,t.max.z)},N=function(t){this.Y=t,this.g=new z,this.N=!1},O=function(t=null){this.name=t?t.name:"",this.b=t?t.bounciness:0,this.c=t?t.dynamicFriction:0,this.g=t?t.staticFriction:0,this.f=t?t.frictionCombine:0,this.a=t?t.bounceCombine:0},P=function(t=-0,i=-0,a=-0,n=-0,e=-0,s=-0,h=-0,o=-0,r=-0){this.data=[-0,-0,-0,-0,-0,-0,-0,-0,-0],this.data[0]=t,this.data[1]=n,this.data[2]=h,this.data[3]=i,this.data[4]=e,this.data[5]=o,this.data[6]=a,this.data[7]=s,this.data[8]=r},A=function(t,i){var a=i.x+i.x,n=i.y+i.y;const e=i.z+i.z,s=i.x*a,h=i.x*n,o=i.x*e,r=i.y*n,f=i.y*e,c=i.z*e;a*=i.w,n*=i.w,i=i.w*e,t.data[0]=1-(r+c),t.data[1]=h+i,t.data[2]=o-n,t.data[3]=h-i,t.data[4]=1-(s+c),t.data[5]=f+a,t.data[6]=o+n,t.data[7]=f-a,t.data[8]=1-(s+r)},S=function(t,i){const a=i.x,n=i.y,e=i.z;i.x=t.data[0]*a+t.data[3]*n+t.data[6]*e,i.y=t.data[1]*a+t.data[4]*n+t.data[7]*e,i.z=t.data[2]*a+t.data[5]*n+t.data[8]*e},B=function(t,i){i.data[0]=t.data[0],i.data[1]=t.data[3],i.data[2]=t.data[6],i.data[3]=t.data[1],i.data[4]=t.data[4],i.data[5]=t.data[7],i.data[6]=t.data[2],i.data[7]=t.data[5],i.data[8]=t.data[8]},L=function(t,i,a){const n=i.data[0],e=i.data[3],s=i.data[6],h=i.data[1],o=i.data[4],r=i.data[7],f=i.data[2],c=i.data[5];i=i.data[8];const l=a.data[0],b=a.data[3],u=a.data[6],p=a.data[1],y=a.data[4],d=a.data[7],m=a.data[2],w=a.data[5];a=a.data[8],t.data[0]=l*n+p*e+m*s,t.data[1]=l*h+p*o+m*r,t.data[2]=l*f+p*c+m*i,t.data[3]=b*n+y*e+w*s,t.data[4]=b*h+y*o+w*r,t.data[5]=b*f+y*c+w*i,t.data[6]=u*n+d*e+a*s,t.data[7]=u*h+d*o+a*r,t.data[8]=u*f+d*c+a*i},D=function(t,i){for(let a=0;9>a;a++)t.data[a]*=i},E=function(t,i,a){var n=Cn;n.set(0,0,0,a),0===t?n.x=i:1===t?n.y=i:n.z=i},F=function(){this.a=new P,this.b=new i,this.c=0,this.f=this.g=null},G=function(t,i){i.V()||(gn.set(0,-t.b.z,t.b.y,t.b.z,0,-t.b.x,-t.b.y,t.b.x,0),a(zn,t.b,i),zn.V()?(L(xn,gn,gn),D(xn,t.c),t.a.add(xn)):(xn.set(0,-zn.z,zn.y,zn.z,0,-zn.x,-zn.y,zn.x,0),gn.multiply(gn),xn.multiply(xn),gn.S(xn),D(gn,t.c),t.a.add(gn)),t.b.add(i),J(t))},J=function(t){t.g=null,t.f=null},H=function(t){t.f=new u;for(let i=0;24>i;i++){A(In,t.f),B(In,kn),kn.multiply(t.a),kn.multiply(In);var a=Math.abs(kn.data[7]),n=Math.abs(kn.data[6]),e=Math.abs(kn.data[3]);if(e=(1+(n=(1+(a=a>n&&a>e?0:n>e?1:2))%3))%3,0===kn.get(n,e)||Math.abs(kn.get(n,n)-kn.get(e,e))>2e6*Math.abs(2*kn.get(n,e)))break;n=(kn.get(n,n)-kn.get(e,e))/(2*kn.get(n,e)),1e3<(e=Math.abs(n))?E(a,1/(4*n),1):(e=1/(e+Math.sqrt(n*n+1)),e=1/Math.sqrt(e*e+1),E(a,Math.sqrt((1-e)/2)*Math.sign(n),Math.sqrt((1+e)/2))),t.f.multiply(Cn),t.f.normalize()}t.g=new i(kn.get(0,0),kn.get(1,1),kn.get(2,2))},K=function(t){t.a.set(0,0,0,0,0,0,0,0,0),t.b.set(0,0,0),t.c=0,J(t)},T=function(t,i,a,n){N.call(this,i),this.c=t,this.a=a||null,this.j=0,this._component=null,this.m=!1,this.N=n},_=function(t,a,n){this.a=t,this.f=new i(a.x,a.y,a.z),this.c=new u(n.x,n.y,n.z,n.w),this.c.normalize(),this.transform=new y,this.g=new y,this.b=new z,R(this)},R=function(t){t.transform.qa(t.c,t.f),g(t.transform,t.g),t.b.transform(t.a.g,t.transform)},V=function(t,i,a){return a.i(i)-t.i(i)},q=function(t,i,a,s){return n(Zn,a,t),t=Zn.i(i),e(s,i,-t),s.add(a),t},U=function(t,i,a,e){n(Jn,i,t),Hn.l(Jn),1e-5>Hn.normalize()?e.l(t):(n(Kn,a,t),e.l(Hn),e.scale(Kn.i(Hn)),i=Jn.i(e)/Jn.i(Jn),i=x(i,0,1),e.l(Jn),e.scale(i),e.add(t))},W=function(t,i,a,e,s){n(Nn,a,i),n(On,e,i),n(Pn,t,i);var h=Nn.i(Pn),o=On.i(Pn);if(0>=h&&0>=o)s.l(i);else{n(Pn,t,a);var r=Nn.i(Pn),f=On.i(Pn);if(0<=r&&f<=r)s.l(a);else{var c=h*f-r*o;if(0>=c&&0<=h&&0>=r)c=h/(h-r),s.set(i.x+Nn.x*c,i.y+Nn.y*c,i.z+Nn.z*c);else{n(Pn,t,e),t=Nn.i(Pn);var l=On.i(Pn);0<=l&&t<=l?s.l(e):0>=(h=t*o-h*l)&&0<=o&&0>=l?(c=o/(o-l),s.set(i.x+On.x*c,i.y+On.y*c,i.z+On.z*c)):0>=(o=r*l-t*f)&&0<=f-r&&0<=t-l?(i=(f-r)/(f-r+(t-l)),s.set(a.x+(e.x-a.x)*i,a.y+(e.y-a.y)*i,a.z+(e.z-a.z)*i)):(e=h/(a=o+h+c),c/=a,s.set(Nn.x*e+i.x+On.x*c,Nn.y*e+i.y+On.y*c,Nn.z*e+i.z+On.z*c))}}}},X=function(t,i,a,s,h,o){n(Un,i,t),n(Wn,s,a),n(Xn,t,a),i=Un.i(Un);var r=Wn.i(Wn);const f=Wn.i(Xn);if(1e-5>=i&&1e-5>=r)return h.l(t),o.l(a),n(Yn,h,o),Yn.i(Yn);if(1e-5>=i){var c=0;r=x(f/r,0,1)}else if(s=Un.i(Xn),1e-5>=r)r=0,c=x(-s/i,0,1);else{const t=Un.i(Wn);0>(r=(t*(c=0!=(c=i*r-t*t)?x((t*f-s*r)/c,0,1):0)+f)/r)?(r=0,c=x(-s/i,0,1)):1<r&&(r=1,c=x((t-s)/i,0,1))}return e(h,Un,c),h.add(t),e(o,Wn,r),o.add(a),n(Yn,h,o),Yn.i(Yn)},Y=function(t,i,a,e,s){n(Bn,a,i),n(Ln,e,i),n(Dn,t,i),t=Bn.i(Bn),i=Bn.i(Ln),a=Ln.i(Ln),e=Dn.i(Bn);const h=Dn.i(Ln),o=Dn.i(Dn),r=t*a-i*i;1e-5>Math.abs(r)?1e-5>Math.abs(t)?(t=Math.sqrt(o/a),s.set(1-t,0,t)):(t=Math.sqrt(o/t),s.set(1-t,t,0)):(s.y=(a*e-i*h)/r,s.z=(t*h-i*e)/r,s.x=1-s.y-s.z)},Z=function(t,i){var a=hh,n=ah,s=nh,h=t.i(a);return t=n.i(a)-h,h=s.i(a)-h,-1e-5>t&&-1e-5>h?t>h?(i.l(n),t):(i.l(s),h):1e-5<t&&1e-5<h?t<h?(i.l(n),t):(i.l(s),h):(e(i,a,-h),i.add(s),0)},$=function(t,i,a,s,h=1e-5){var o=Ss;return n($n,a,i),a=o.i($n),!(Math.abs(a)<h||(n(Qn,i,t),0>(t=-o.i(Qn)/a)||1<t||(e(s,$n,t),s.add(i),0)))},Q=function(t,i,a,h,o){return n(te,i,t),n(ie,h,a),n(ae,a,t),r(ne,ae,ie),r(se,te,ie),!(1e-5>(a=s(se))||0>(i=ne.i(se)/a)||1<i||(r(ee,ae,te),0>(a=ee.i(se)/a)||1<a||(e(o,te,i),o.add(t),0)))},tt=function(t,a,e,s){N.call(this,32),this.D=t,this.I=a,this.G=e,this.a=s,this.o=new i,n(he,this.I,this.D),n(oe,this.G,this.D),r(this.o,he,oe),this.o.normalize(),(t=this.g).min.x=Math.min(this.D.x,this.I.x,this.G.x),t.min.y=Math.min(this.D.y,this.I.y,this.G.y),t.min.z=Math.min(this.D.z,this.I.z,this.G.z),t.max.x=Math.max(this.D.x,this.I.x,this.G.x),t.max.y=Math.max(this.D.y,this.I.y,this.G.y),t.max.z=Math.max(this.D.z,this.I.z,this.G.z)},it=function(){this.f=this.b=null,this.u=new i,this.a=0,this.o=new i,this.ea=new i,this.g=0},at=function(t){if(0!==t.length){var i=t.buffer[t.length-1];return t.length--,i}},nt=function(t,i){t.buffer[i]=t.buffer[t.length-1],t.length--},et=function(t,i){-1!==(i=t.indexOf(i))&&nt(t,i)},st=function(t,i){t.ca.l(i.ca),t.da.l(i.da),t.u.l(i.u)},ht=function(t,i,a,h){if(n(ge,t.position,i.position),ge.V())return!1;ge.normalize(),ve.sa(t,i,ge),ge.scale(-1),Me.sa(t,i,ge);let o=ye;o.J(ve,Me),xe.set(1/0,1/0,1/0);let r=0;for(;15>r;){if(o.ta(ze),ze.V())return!1;if(o=o.ma(ze),s(ze)>s(xe))return o.X(xe,a,h),!0;if(xe.l(ze),e(ge,xe,-1),ge.normalize(),je.sa(t,i,ge),xe.i(ge)+1e-4>=je.u.i(ge))return o.X(xe,a,h),!0;o=o.fa(je),r++}return o.ta(ze),o.ma(ze).X(xe,a,h),!0},ot=function(t,i,a){this.buffer=t,this.a=i,this.b=a},rt=function(t){this.a=new z,this.g=this.f=null,this.j=0,this.b=t||null,this.c=null,this.h=0},ft=function(t){t.b?t.a.l(t.b.g):v(t.a,t.f.a,t.g.a)},ct=function(t,i){if(i===t)return 1/0;v(Oe,t.a,i.a);{i=(t=Oe).max.y-t.min.y;const a=t.max.z-t.min.z;t=(t.max.x-t.min.x)*(i+a)+i*a}return t},lt=function(t,i){const a=i.b-i.a;if(!(1>=a)){var n=i.get(0);for(t.c=n,t.h=ct(t,n),n=1;n<a;n++){const a=i.get(n),e=ct(t,a);t.h>e&&(t.c=a,t.h=e)}}},bt=function(t){return 153391689&((t=51130563&((t=50393103&((t=4278190335&(t^t<<16))^t<<8))^t<<4))^t<<2)},ut=function(t,i){return t.j-i.j},pt=function(t){return Math.round(Math.max(Math.pow(t,.5)/2*Math.pow(t,.5),1))},yt=function(t,i){var a=t.b-t.a;if(0!==a)if(4>a)dt(t,pt(4));else{if(0<i){var n=0,e=t.b-t.a;do{var s=Math.round((n+e)/2);0<(t.get(s).j&i)?e=s:n=s}while(1<e-n);n=e}else n=Math.ceil(a/2);for(s=t.a,e=t.a+n,t.a=s,t.b=e,a=new ot(t.buffer,t.a+n,t.a+a),yt(t,i>>>=1),yt(a,i),i=a.a;i<a.b;)t.buffer[t.b]=t.buffer[i],t.b++,i++;dt(t,pt(t.b-t.a))}},dt=function(t,i){let a=t.b-t.a;if(!(a<=i)){for(var n=0;n<a;n++)lt(t.get(n),t);for(;a>i;){n=t.get(0);for(var e=0,s=1;s<a;s++){var h=t.get(s);n.h>h.h&&(n=h,e=s)}if(s=n.c,(h=new rt).f=n,h.g=s,ft(h),s=h,t.buffer[t.a+e]=s,-1===(e=(h=t).indexOf(n.c)))throw Error("Element not found");if(h.buffer[h.a+e]=h.buffer[h.b-1],h.b--,a--,a<=i)break;for(lt(s,t),e=0;e<a;e++)(s=t.get(e)).c!==n&&s.c!==n.c||lt(s,t)}}},mt=function(t){for(var i=[],a=new z,n=0;n<t.length;n++){v(a,a,t[n].g);var e=new rt(t[n]);ft(e),i.push(e)}t=512/(a.max.x-a.min.x),n=512/(a.max.y-a.min.y),e=512/(a.max.z-a.min.z);for(let s=0;s<i.length;s++){const h=i[s];h.j=(bt(((h.a.max.z-h.a.min.z)/2+h.a.min.z+a.min.z)*e)<<2)+(bt(((h.a.max.y-h.a.min.y)/2+h.a.min.y+a.min.y)*n)<<1)+bt(((h.a.max.x-h.a.min.x)/2+h.a.min.x+a.min.x)*t)}i.sort(ut),a=new ot(i,0,i.length),2>=i.length?i=0:(i=i[i.length-1].j,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,i-=i>>>1),yt(a,i),dt(a,1),this.a=i=a.get(0)},wt=function(t,i,a,n,e){for(T.call(this,t,8,n,e),this.b=i,this.s=a,this.h=this.f=null,(t=this.g).min.x=t.min.y=t.min.z=0,t.max.x=t.max.y=t.max.z=0,i=0;i<this.b.length;i++)t.min.x=Math.min(t.min.x,this.b[i].x),t.min.y=Math.min(t.min.y,this.b[i].y),t.min.z=Math.min(t.min.z,this.b[i].z),t.max.x=Math.max(t.max.x,this.b[i].x),t.max.y=Math.max(t.max.y,this.b[i].y),t.max.z=Math.max(t.max.z,this.b[i].z)},gt=function(t){if(t.f)return t.f;t.f=[];const i=t.b,a=t.s,n=t.f;for(let t=0;t<a.length;t+=3)n.push(new tt(i[a[t]],i[a[t+1]],i[a[t+2]],t/3|0));return t.f},xt=function(t){return t.h||(t.h=new mt(gt(t)).a),t.h},zt=function(t,i,n){a(Ae,i,t.v),t.oa(Ae),Mt(t,n,Se),Se.multiply(t.s),Ia(t,Se)},vt=function(t){if(t.H!==Pr||!(1&t.a)||512&t.a)return!1;let i=!0;for(let a=0;a<t.b.a.length;a++){const n=t.b.a[a].a;if(8===n.Y)return!1;i=i&&n.N}return!i},Mt=function(t,i,a){t.aa().A(t.j,Pe),Pe.add(t.f),.001>(t=Pe.length())?Pe.scale(.5*i-i*i*i*.020833333333*t*t):Pe.scale(Math.sin(.5*t*i)/t),a.x=Pe.x,a.y=Pe.y,a.z=Pe.z,a.w=Math.cos(t*i*.5)},jt=function(t,i,a,s=!1){let o=a;e(Be,t.m,t.ya),Be.add(t.g),Be.scale(a),h(Le,Be),Le.scale(1e-4);const r=Da(t);Ee.clear(),Fe.clear(),Ge.clear();for(var f=0;f<i.length;f++){var l=i[f],b=Ee;if(8===l.b.Y)for(var u=gt(l.b),p=0;p<u.length;p++){var y=u[p];Ge.buffer.length===Ge.length?Ge.add(new We):Ge.length++;var d=Ge.buffer[Ge.length-1];d.J(y,l),b.add(d)}else Fe.buffer.length===Fe.length?Fe.add(new Ue):Fe.length++,(u=Fe.buffer[Fe.length-1]).J(l),b.add(u)}for(i=Ca(t,a),f=0;f<Ee.length;f++)Ee.buffer[f].j(i)||(nt(Ee,f),f--);for(;1e-5<o;){t:{for(i=r,f=o,l=s,s=Ee,b=Be,He.clear(),Je.l(b),b=Je.normalize(),u=0;u<s.length;u++){d=i,(y=p=s.buffer[u]).c=1/0,y.g=1/0;for(let t=0;t<d.length;t++){if(!y.h(d.buffer[t],Re,Ve)){y.c=0,y.g=0;break}var m=c(Ve,Re);m<y.c&&(y.c=m),n(qe,Ve,Re),(m=qe.i(Je))<y.g&&(y.g=m)}if(p.f=p.c/b*f,(y=0===p.f)&&!l){s=p;break t}p.c>=b?(nt(s,u),u--):y&&l&&He.add(p.a.id)}if(0<He.length)for(i=0;i<s.length;i++)-1!==He.indexOf(s.buffer[i].a.id)&&(nt(s,i),i--);for(i=null,f=0;f<s.length;f++)l=s.buffer[f],(null===i||l.f<i.f)&&(i=l);s=i}if(!(i=s)){zt(t,Be,o);break}if(0===(s=i.f))return o!==a&&(t.a|=32),i.a;if(s>=o){zt(t,Be,o);break}for(De.l(Be),De.scale(s/o),De.add(Le),zt(t,De,s),Be.S(De),i=0;i<r.length;i++)Ka(r.buffer[i]);o-=s,s=!1}return null},kt=function(t,i){Ke.clear(),Te.clear();for(var a=0;a<t.length;a++){var n=t[a],e=vt(n);!e||32&n.a?e?(Oa(n,i),La(n)):e||Te.add(n):Ke.add(n)}if(0!==Ke.length)for(t=0;t<Ke.length;t++){a=Ke.buffer[t],Oa(a,i),a.m.set(0,0,0),a.j.set(0,0,0),n=Ca(a,i),e=[];for(let t=0;t<Te.length;t++){var s=Te.buffer[t];if(j(n,va(s))){s=Da(s);for(let t=0;t<s.length;t++){const i=s.buffer[t];!i.b.N&&j(n,i.h)&&e.push(i)}}}0===e.length?Na(a,i):(jt(a,e,i,!0),a.a&=-33,La(a))}},It=function(t,i){return t.buffer[0]-i.buffer[0]},Ct=function(t){var i=Ye;const a=t.min;return t=t.max,Math.min(a.x*i.x,t.x*i.x)+Math.min(a.y*i.y,t.y*i.y)+Math.min(a.z*i.z,t.z*i.z)},Nt=function(t){var i=Ye;const a=t.min;return t=t.max,Math.max(a.x*i.x,t.x*i.x)+Math.max(a.y*i.y,t.y*i.y)+Math.max(a.z*i.z,t.z*i.z)},Ot=function(){this.buffer=[-0,-0,-0,-0,-0,-0],this.b=this.a=this.c=!1,this.body=null},Pt=function(){this.b=[],this.a=[],this.c=new pe,this.f=new pe},At=function(t,i,a){const n=[];for(let e=0;e<t.b.length;e++){const s=t.b[e];j(i,va(s))&&0!=(s.b.f&a)&&n.push(s)}return n},St=function(){this.g=0,this.f=this.c=null,this.a=[],this.b=new pe},Bt=function(t,i){t.a[i].F(),t.a[i]=t.a[t.a.length-1],t.a.pop()},Lt=function(t){for(;t.b.length;)at(t.b).F();for(;t.a.length;)t.a.pop().F()},Dt=function(t,i,a,e){let h=0;return n(ts,t.b,i.b),n(is,a.b,e.b),o(ts,is),h=Math.max(h,s(ts)),n(ts,t.b,a.b),n(is,i.b,e.b),o(ts,is),h=Math.max(h,s(ts)),n(ts,t.b,e.b),n(is,i.b,a.b),o(ts,is),Math.max(h,s(ts))},Et=function(t,i,a,n){return Math.max(f(t.f,i.f),f(t.f,a.f),f(t.f,n.f),f(i.f,a.f),f(i.f,n.f),f(a.f,n.f))},Ft=function(t,i){if(1===t.c.b.a.length&&1===t.f.b.a.length)0===t.b.length?(i=Wa(i),Ua(i),i.m|=af,t.b.add(i)):((t=t.b.buffer[0]).s=i.s,t.m&ef&&(t.m&=~ef,t.m|=nf));else{var a=!1;for(let n=t.b.length-1;0<=n;n--){const e=t.b.buffer[n];if(e.C===i.C&&e.B===i.B||e.B===i.C&&e.C===i.B){a=!0,e.s=i.s,e.m&ef&&(e.m&=~ef,e.m|=nf);break}}a||(i=Wa(i),Ua(i),i.m|=af,t.b.add(i))}},Gt=function(){this.a=[],this.b=0,this.cache=new Map},Jt=function(t,i){const a=t.a[i];t.a[i]=t.a[t.b-1],t.b--,t.cache.delete(a.g),Lt(a),bf(lf.Ca,a)},Ht=function(t,i){return Math.min(t.id,i.id)+(Math.max(t.id,i.id)<<16)},Kt=function(){this.a=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],this.b=[-0,-0,-0,-0,-0,-0]},Tt=function(t,i,a,n){const e=i+a,s=i*i,h=s+a*e;t.b[0]=e+n,t.b[1]=h+n*t.b[0],t.b[2]=i*s+a*h+n*t.b[1],t.b[3]=t.b[1]+i*(t.b[0]+i),t.b[4]=t.b[1]+a*(t.b[0]+a),t.b[5]=t.b[1]+n*(t.b[0]+n)},_t=function(t,i,a,n,e){T.call(this,t,4,a,e),this.H=n,this.h=i,this.F=this.C=this.s=this.b=this.v=this.f=null,$t(this.g,this.h),this.B=null},Rt=function(t){return t.f||Xt(t),t.f},Vt=function(t){return t.b||Xt(t),t.b},qt=function(t){return t.s||Xt(t),t.s},Ut=function(t){return t.C||Xt(t),t.s},Wt=function(t){return t.F||Xt(t),t.F},Xt=function(t){t.cb(),t.gb(),t.fb(),t.eb();{var i=t.f[0],a=t.f[0];let n=t.f[0],e=t.f[0],s=t.f[0],h=t.f[0];for(let o=1;o<t.f.length;o++){const r=t.f[o];r.position.x>i.position.x?i=r:r.position.x<a.position.x&&(a=r),r.position.y>n.position.y?n=r:r.position.y<e.position.y&&(e=r),r.position.z>s.position.z?s=r:r.position.z<h.position.z&&(h=r)}t.F=[i,a,n,e,s,h]}for(i=0;i<t.b.length;i++)(a=t.b[i]).f=null,a.c=[]},Yt=function(t,i){const a=(t=Zt(t,i)).position.i(i);let n=t.a[0],e=1/0;for(let h=0;h<t.a.length;h++){const o=t.a[h];var s=(o.c.a===t?o.a:o.c.a).position.i(i);(s=Math.abs(a-s))<e&&(e=s,n=o)}return n},Zt=function(t,i){var a=Wt(t);let n=(t=a[0]).position.i(i);for(var e=1;e<a.length;e++){var s=a[e],h=s.position.i(i);h>n&&(t=s,n=h)}do{for(a=!1,e=t,s=0;s<e.a.length;s++){const o=(h=e.a[s].a).position.i(i);o>n&&(n=o,t=h,a=!0)}}while(a);return t},$t=function(t,i){t.min.x=t.min.y=t.min.z=1/0,t.max.x=t.max.y=t.max.z=-1/0;for(let a=0;a<i.length;a++)t.min.x=Math.min(t.min.x,i[a].x),t.min.y=Math.min(t.min.y,i[a].y),t.min.z=Math.min(t.min.z,i[a].z),t.max.x=Math.max(t.max.x,i[a].x),t.max.y=Math.max(t.max.y,i[a].y),t.max.z=Math.max(t.max.z,i[a].z)},Qt=function(t){if(t.H)return null;if(!t.B){t.B=new Kt;var i=t.B,a=Vt(t);for(let t=0;t<a.length;t++){const f=a[t],c=f.a;let l=c.b;do{var e=c.c.a.position,s=l.a.position,h=l.c.a.position;if(n(es,s,e),n(ss,h,e),r(hs,es,ss),0>hs.i(f.o)){hs.scale(-1);var o=s;s=h,h=o}o=e.x;const t=s.x,a=h.x,b=e.y,u=s.y,p=h.y;e=e.z,s=s.z,h=h.z;const y=hs.x,d=hs.y,m=hs.z;Tt(i,o,t,a),i.a[0]+=y*i.b[0],i.a[1]+=y*i.b[1],i.a[4]+=y*i.b[2],i.a[7]+=y*(b*i.b[3]+u*i.b[4]+p*i.b[5]),Tt(i,b,u,p),i.a[2]+=d*i.b[1],i.a[5]+=d*i.b[2],i.a[8]+=d*(e*i.b[3]+s*i.b[4]+h*i.b[5]),Tt(i,e,s,h),i.a[3]+=m*i.b[1],i.a[6]+=m*i.b[2],i.a[9]+=m*(o*i.b[3]+t*i.b[4]+a*i.b[5]),l=l.b}while(l.b!==c)}for(a=0;10>a;a++)i.a[a]*=ns[a]}return t.B},ti=function(t){const i=[];for(let a=0;a<t.b.length;a++){const n=t.b[a];if(n.g!==ys){t.b[a]=t.b[t.b.length-1],t.b.pop(),a--;for(let t=0;t<n.c.length;t++)i.push(n.c[t])}}return i},ii=function(t,i){var a=t.a;do{var n;if((n=li(a.f,a.c.f.b)>-Number.EPSILON)&&(n=a.c,n=li(n.f,n.c.f.b)>-Number.EPSILON),n&&a.f.o.i(a.c.f.o)>1-Number.EPSILON&&-1===i.indexOf(a.c.f)){{var e=a.c.f;e.g=ds;var s=a.c;i=a.g,n=a.b;let h=s.g;s=s.b;let o=i;for(;i.c.f===e;)if(i=i.g,s=s.b,i===o)throw Error("Degenerated face");for(o=n;n.c.f===e;)if(h=h.g,(n=n.b)===o)throw Error("Degenerated face");for(e=s;e!==h.b;e=e.b)e.f=t;t.a===a&&(t.a=n),h.b=n,n.g=h,i.b=s,s.g=i,bi(t)}return!0}a=a.b}while(a!==t.a);return!1},ai=function(t){let i=null,a=-1/0;for(let n=0;n<t.b.length;n++){const e=t.b[n],s=e.h;null!==e.f&&s>a&&(a=s,i=e)}return i},ni=function(t,i,a,n,e){n.g=ds,n=null===a?a=n.a:a.b;do{const a=n.c.f;a.g===ys&&(1e-10<li(a,i)?ni(t,i,n.c,a,e):e.push(n)),n=n.b}while(a!==n)},ei=function(t,i,a){const n=new ci,e=new ri;return e.a=t,e.f=n,(t=new ri).a=i,t.f=n,(i=new ri).a=a,i.f=n,e.g=i,e.b=t,t.g=e,t.b=i,i.g=t,i.b=e,n.a=e,bi(n),n},si=function(t,i){let a=1e-10,n=null;for(let e=0;e<i.length;e++){const s=i[e],h=li(s,t.position);h>a&&(a=h,n=s)}n&&(n.c.push(t),null===n.f||n.h<a)&&(n.f=t,n.h=a)},hi=function(t,i){for(let a=0;a<t.length;a++)if(Math.abs(t[a].i(i))>1-Number.EPSILON)return!0;return!1},oi=function(t){this.position=t,this.a=[]},ri=function(){this.f=this.a=this.c=this.g=this.b=null},fi=function(t,i){t.c=i,i.c=t},ci=function(){this.a=null,this.o=new i,this.b=new i,this.j=0,this.c=[],this.f=null,this.h=0,this.g=ys},li=function(t,i){return t.o.i(i)-t.j},bi=function(t){const i=t.a;t.o.set(0,0,0),t.b.l(i.a.position),n(us,i.a.position,i.b.a.position);let a=i.b,e=1;for(;i!==a;){if(t.b.add(a.a.position),t.o.V()&&(n(ps,a.a.position,a.b.a.position),!b(Number.EPSILON))){r(t.o,ps,us);var s=t.o;s.normalize(Number.EPSILON),s.normalize(Number.EPSILON)}e++,a=a.b}t.b.scale(1/e),t.j=t.o.i(t.b)},ui=function(t,i){for(t=t.a;0<i;)t=t.b,i--;return t},pi=function(t,i,a,n){let e=i,s=t;return t<i&&(e=t,s=i),t=n,i=a,a<n&&(t=a,i=n),s>t?i-e:0},yi=function(t,i,a,n,s,h=0){let o=a[0],r=1/0;for(let f=0;f<n;f++){const n=a[f];t.a(n,ms),i.a(n,ws);const c=pi(ms[1],ms[0],ws[1],ws[0]);if(c<=-h+Number.EPSILON)return s.l(n),0;const l=pi(-ms[0],-ms[1],-ws[0],-ws[1]);if(l<=-h+Number.EPSILON)return e(s,n,-1),0;c<r&&(r=c,o=n),l<r&&(r=l,e(s,n,-1),o=s)}return s.l(o),r},di=function(){this.c=[],this.f=0},mi=function(){this.c=null},wi=function(t,i){return t.c.T(i,xs),xs.i(i)},gi=function(){this.c=null,this.g=new y,this.f=new y},xi=function(t,i){return w(t.g,i,vs),t.c.T(vs,zs),m(t.f,zs),zs.i(i)},zi=function(){this.c=0,this.g=lf.Ja,this.f=null,this.a=new i,this.o=new i,this.b=0},vi=function(){this.c=1,this.g=lf.Ia,this.f=null,this.j=new i,this.h=new i,this.a=new i,this.o=new i,this.b=0},Mi=function(){this.c=2,this.g=lf.Ka,this.f=null,this.a=new i,this.o=new i,this.b=0},ji=function(t,i,a,n){Y(i,t.D,t.I,t.G,js);const e=1e-5<Math.abs(js.x);var s=1e-5<Math.abs(js.y),h=1e-5<Math.abs(js.z),o=e?s||h:s&&h;return e&&s&&h?((s=$a(lf.Ja)).J(t,i,a,n),s):o?(h=t.D,o=t.I,e?s||(o=t.G):h=t.G,(s=$a(lf.Ia)).J(t,h,o,i,a,n),s):(i=t.D,s?i=t.I:h&&(i=t.G),(s=$a(lf.Ka)).J(t,i,a,n),s)},ki=function(t,i){if(.99999<Math.abs(t.o.i(i.o)))return null;var a=t.D.i(t.o),n=i.D.i(t.o)-a,s=i.I.i(t.o)-a;if(a=i.G.i(t.o)-a,0<n&&0<s&&0<a||0>n&&0>s&&0>a)return null;e(ks,t.o,-n),ks.add(i.D),e(Is,t.o,-s),Is.add(i.I),e(Cs,t.o,-a),Cs.add(i.G);var h=c(ks,Is),o=c(Is,Cs),r=c(Cs,ks);const f=[];return h>o&&h>r?f.push(ks,Is):o>h&&o>r?f.push(Is,Cs):f.push(Cs,ks),Di(t,f[0],f[1],Ns[0],Ns[1],0)&&Di(i,Ns[0],Ns[1],Os[0],Os[1],0)?(r=i.D.i(i.o),o=t.D.i(i.o)-r,h=t.I.i(i.o)-r,r=t.G.i(i.o)-r,n=Math.abs(Math.min(n,s,a)),s=o,Math.abs(s)>Math.abs(h)&&(s=h),Math.abs(s)>Math.abs(r)&&(s=r),n-1e-5<(a=Math.abs(s))?(e(Ps,t.o,-1),[ji(t,Os[0],Ps,n),ji(t,Os[1],Ps,n)]):(e(Ps,i.o,-Math.sign(s)),[ji(t,Os[0],Ps,a),ji(t,Os[1],Ps,a)])):null},Ii=function(t,a,n,e){e.La||(e.La=new Map),e.Ta||(e.Ta=new Map),e.ga||(e.ga=new y,e.ga.l(t.c),e.ga.multiply(n.transform)),t=[];const s=[];n=xt(n.b);do{var h=e.La.get(n);if(h||((h=new z).l(n.a),h.transform(h,e.ga),e.La.set(n,h)),j(h,a.g))if(n.b){if((h=e.Ta.get(n))||(h={D:new i,I:new i,G:new i,o:new i},e.ga.A(n.b.D,h.D),e.ga.A(n.b.I,h.I),e.ga.A(n.b.G,h.G),w(e.ga,n.b.o,h.o),e.Ta.set(n,h)),n=ki(a,h))for(h=0;h<n.length;h++)t.push(n[h]);n=s.pop()}else s.push(n.f),n=n.g;else n=s.pop()}while(n);return t},Ci=function(t,i,a,n){switch(Math.max(t,i)){case 1:return a*n;case 2:return Math.min(a,n);case 3:return Math.max(a,n);default:return(a+n)/2}},Ni=function(t,a){for(;t.length<a;)t.push(new i)},Oi=function(t,a,e,s,h){let o=Bs;o.clear();for(var f=0;f<a;f++)o.add(t[f]);for(t=0;t<s;t++){a=e[t],n(As,t===s-1?e[0]:e[t+1],a),r(Ss,As,h),Ss.normalize(),f=Ss.i(a);const l=o===Bs?Ls:Bs;l.clear();for(let t=0;t<o.length;t++){const n=o.buffer[t],e=t===o.length-1?o.buffer[0]:o.buffer[t+1];var c=Ss.i(n)-f;const s=Ss.i(e)-f;let h=!0;if(0<=c&&0<=s?l.add(e):0<=c&&0>s?(c=new i,h=$(a,n,e,c,Number.EPSILON),l.add(c)):0>c&&0<=s&&(c=new i,h=$(a,n,e,c,Number.EPSILON),l.add(c),l.add(e)),!h)return[]}o=l}for(e=[],s=0;s<o.length;s++)e.push(o.buffer[s]);return e},Pi=function(t,i){const a=qt(t.b);Ni(i,a.length),t=t.j;for(let n=0;n<a.length;n++)t.A(a[n],i[n]);return i},Ai=function(t,i){const a=Rt(t.b);Ni(i,a.length);for(let n=0;n<a.length;n++)t.transform.A(a[n].position,i[n]);return i},Si=function(t,i){let a=(i=Vt(i.b))[0],n=1/0;for(let e=0;e<i.length;e++){const s=i[e],h=f(s.o,t);h<n&&(a=s,n=h)}return a},Bi=function(t,i){let a=(i=Vt(i.b))[0].o.i(t),n=i[0];for(let e=1;e<i.length;e++){const s=i[e].o.i(t);s<a&&(a=s,n=i[e])}return n},Li=function(t,i){if(48>Rt(t.b).length){const a=$a(lf.ia);return a.J(t,Ai(t,i),Rt(t.b).length),a}return(i=$a(lf.Z)).J(t),i},Di=function(t,i,a,s,h,o){return e(Ds,t.o,o),n(s,i,Ds),n(h,a,Ds),!!(Ei(t,t.D,t.I,s,h)&&Ei(t,t.I,t.G,s,h)&&Ei(t,t.G,t.D,s,h))&&(s.add(Ds),h.add(Ds),!0)},Ei=function(t,i,a,e,s){n(Es,a,i),o(Es,t.o),Es.normalize();var h=i.i(Es);return t=e.i(Es)-h,h=s.i(Es)-h,!(0<t&&0<h||(0>=t&&0>=h||Q(i,a,e,s,0<t&&0>h?e:s),0))},Fi=function(t,i,a,n,e){T.call(this,t,1,n,e),this.b=Math.max(i,1e-4),this.f=Math.max(Math.abs(a),1e-4),(t=this.g).min.x=t.min.z=-this.b,t.min.y=-this.f-this.b,t.max.x=t.max.z=this.b,t.max.y=this.f+this.b},Gi=function(t,i,a,n){T.call(this,t,16,a,n),this.b=Math.max(i,1e-4),(t=this.g).min.x=t.min.y=t.min.z=-this.b,t.max.x=t.max.y=t.max.z=this.b},Ji=function(t,i,n){const s=t.j.b;e(t.b,t.c,t.h.b.b),t.b.add(i),e(t.a,t.c,-s.b),t.a.add(n),a(t.f,t.b,t.a),t.f.scale(.5),m(t.h.c,t.b),m(t.j.c,t.a)},Hi=function(t,i,n){e(t.b,t.c,t.h.b.b),t.b.add(i),t.a.l(n),a(t.f,t.b,t.a),t.f.scale(.5),m(t.h.c,t.b),m(t.j.c,t.a)},Ki=function(t,i,a,s,h){s.l(t),h.l(i),t=q(a.a.a.position,a.o,t,ch),q(a.a.a.position,a.o,i,lh),i=a.a;let o=!0,f=!0,c=0;do{var l=i.c.a.position;const u=i.a.position;n(bh,u,l),r(uh,a.o,bh),uh.normalize();var b=l.i(uh);const p=ch.i(uh)-b;if(1e-5<p&&(o=!1),1e-5<(b=lh.i(uh)-b)&&(f=!1),Math.sign(p)===Math.sign(b))i=i.b;else if(Q(l,u,ch,lh,ph)){if(c++,e(l=0<p?s:h,a.o,t),l.add(ph),2===c)return!0;i=i.b}else i=i.b}while(i!==a.a);return 0!==c||o&&f},Ti=function(t,a,n){t.g.a&a.g.a&65536&&(t=t.b.c+(a.b.c<<16),(a=Uh.get(t))||(a=new i,Uh.set(t,a)),a.l(n))},_i=function(t,i,a,n,e,s){to.clear();const h=Ut(t.b),o=Ut(i.b);t=t.j,i=i.j,Ni(Zh,h.length);for(var f=0;f<h.length;f++)t.A(h[f],Zh[f]);for(Ni($h,o.length),t=0;t<o.length;t++)i.A(o[t],$h[t]);for(Ni(Qh,h.length*o.length),t=0;t<h.length;t++)for(i=Zh[t],f=0;f<o.length;f++){const a=Qh[t*o.length+f];r(a,i,$h[f]),a.V()||(a.normalize(),to.add(a))}return yi(a,n,to.buffer,to.length,e,s)},Ri=function(t,i,a){const e=a.f;return a.transform.A(uo,po),m(t.c,po),t=i.D.i(i.o),0>=po.i(i.o)-t?null:(W(po,i.D,i.I,i.G,mo),t=c(po,mo),(a=a.b.b-t)<=-e+Number.EPSILON?null:(n(yo,mo,po),yo.normalize(),[ji(i,mo,yo,a)]))},Vi=function(t,i,a){var s=a.f;if(wo.set(0,a.b.f,0),go.set(0,-a.b.f,0),m(a.transform,wo),m(a.transform,go),m(t.c,wo),m(t.c,go),n(xo,wo,go),xo.normalize(),t=i.D.i(i.o),wo.i(i.o)<t||go.i(i.o)<t)return null;var h=i.D,o=i.I,r=i.G;t=X(h,o,wo,go,zo,Mo);var c=X(o,r,wo,go,An,Sn);return c+1e-5<t&&(t=c,zo.l(An),Mo.l(Sn)),(c=X(r,h,wo,go,An,Sn))+1e-5<t&&(t=c,zo.l(An),Mo.l(Sn)),W(wo,h,o,r,An),(c=f(wo,An))+1e-5<t&&(t=c,zo.l(An),Mo.l(wo)),W(go,h,o,r,An),(h=f(go,An))+1e-5<t&&(t=h,zo.l(An),Mo.l(go)),t=Math.sqrt(t),(a=a.b.b-t)<=-s+Number.EPSILON?null:(n(Io,zo,Mo),Io.normalize(),s=xo.i(i.o),1e-5>Math.abs(s)&&Di(i,wo,go,jo,ko,t)?(e(zo,i.o,-t),zo.add(jo),n(Io,zo,jo),Io.normalize(),s=ji(i,zo,Io,a),e(vo,i.o,-t),vo.add(ko),n(Co,vo,ko),Co.normalize(),i=ji(i,vo,Co,a),s.c<i.c?(bf(i.g,i),[s]):i.c<s.c?(bf(s.g,s),[i]):[s,i]):[ji(i,zo,Io,a)])},qi=function(t,a,n){let e=0,s=n.a;do{So.length===e&&So.push(new i),t.transform.A(s.a.position,So[e]),m(a.c,So[e]),e++,s=s.b}while(s!==n.a);return e},Ui=function(t,i,a,n){const s=a.f;if(!n.Ra){n.Ra=Ai(a,No),n.ob=Rt(a.b).length;for(var h=0;h<n.ob;h++)m(t.c,n.Ra[h])}if(!n.Qa)for(n.Qa=Pi(a,Oo),n.nb=qt(a.b).length,h=0;h<n.nb;h++)t.c.U(n.Qa[h]);var o=[i.D,i.G,i.I];48>=Rt(a.b).length?((h=$a(lf.ia)).J(a,n.Ra,n.ob),cf[lf.ia].push(h)):((h=$a(lf.xa)).J(a,t.transform,t.c),cf[lf.xa].push(h));var r=$a(lf.ia);if(r.J(t,o,o.length),cf[lf.ia].push(r),0===(n=yi(r,h,n.Qa,n.nb,Po,s)))return Qa(),null;if(0===(h=yi(h,r,[i.o],1,Ao,s)))return Qa(),null;if(n-1e-5<h){n=!0,h=Po,Lo.l(Po),w(t.transform,Po,Do),a.c.U(Do),r=Si(Do,a);var f=qi(a,t,r);r=So,t=o,a=o.length}else n=!1,h=Ao,e(Lo,Ao,-1),r=o,f=o.length,w(t.transform,i.o,Do),a.c.U(Do),o=Bi(Do,a),a=qi(a,t,o),t=So;if(0===(t=Oi(t,a,r,f,h)).length)return Qa(),null;for(a=[],o=r[0].i(h),r=0;r<t.length;r++){const c=(f=t[r]).i(h)-o;c>s||(n||(e(Bo,h,c),f.add(Bo)),f=ji(i,f,Lo,-c),a.push(f))}return Qa(),a},Wi=function(t,i){return 1e-5<Math.abs(i.b-t.b)?i.b-t.b:t.c!==i.c?t.c-i.c:1e-5<Math.abs(t.a.x-i.a.x)?t.a.x-i.a.x:1e-5<Math.abs(t.a.y-i.a.y)?t.a.y-i.a.y:t.a.z-i.a.z},Xi=function(t,i,n,s,h){for(let o=0;o<n.length;o++){const r=n[o],f=$a(lf.O);f.h=t,f.j=i,s&&(f.s=!0),w(t.transform,r.o,f.c),f.c.scale(-1),f.g=r.b,t.transform.A(r.a,f.b),e(f.a,r.o,r.b),f.a.add(f.b),a(f.f,f.b,f.a),f.f.scale(.5),f.b.l(r.a),m(f.j.c,f.a),h.add(f),bf(r.g,r)}},Yi=function(t,i,a,n,e){let s=t,h=i;8!==t.b.Y&&(s=i,h=t);var o=h.f;Eo.transform(h.h,s.c);var r={};t=[],i=[];var f=[],c=xt(s.b);do{if(k(c.a,Eo,o))if(c.b){var b=a(s,c.b,h,r);if(c=f.pop(),null!==b){for(var u=0;u<b.length;u++){const a=b[u];0===a.c?t.push(a):i.push(a)}if(n)break}}else f.push(c.f),c=c.g;else c=f.pop()}while(c);if(0!==t.length||0!==i.length)if(n)Xi(s,h,0!==t.length?t:i,n,e);else{if(i.sort(Wi),0!==i.length){for(a=new Set,o=0;o<t.length;o++)r=t[o],a.add(r.f.D),a.add(r.f.I),a.add(r.f.G);for(u=o=null,r=0;r<i.length;r++)b=(c=1===(f=i[r]).c?a.has(f.j)&&a.has(f.h):a.has(f.a))&&!!o&&1e-5>Math.abs(o.b-f.b),u=!!u&&1e-5>Math.abs(u.b-f.b)&&l(u.a,f.a)&&l(u.o,f.o),a.add(f.f.D),a.add(f.f.I),a.add(f.f.G),u||c&&!b?bf(f.g,f):(t.push(f),o=f),u=f}0!==t.length&&Xi(s,h,t,n,e)}},Zi=function(){this.a=new Gt,this.b=new pe},$i=function(t,i,a,n){var e=i,s=a;if(8&(e.a|s.a))e=!1;else if(e.a&s.a&65536){var h=Qo;e=!(0!==h.g.size&&h.g.has(Math.min(e.id,s.id)+(Math.max(e.id,s.id)<<16))||0===as[(7&e.a)+(e.b.N?16:8)][(7&s.a)+(s.b.N?16:8)]||(e.b.f&s.b.j)===e.b.f&&(s.b.f&e.b.j)===s.b.f)}else e=!0;if(e)for(i.id>a.id&&(e=i,i=a,a=e),i=Da(i),a=Da(a),e=0;e<i.length;e++)for(s=i.buffer[e],h=0;h<a.length;h++)t.c(s,a.buffer[h],n)},Qi=function(){this.b=Ya(35),this.g=null,this.a=this.f=this.c=0;const t=sf;t[this.b+3]=-1/0,t[this.b+4]=1/0},ta=function(t,i,a){const n=sf;for(t=t.b+11;i<a;i++)n[t+i]=0},ia=function(){this.active=!1,this.a=null,this.j=!1,this.b=null,this.m=!1,this.H=this.C=this.B=-0,this.c=[],this.s=-0,this.L=this.F=1/0,this.h=this.g=1,this.f=null,this.v=!1},aa=function(t){t.active=!1,t.a=null,t.j=!1,t.b=null,t.m=!1,t.g=1,t.h=1,t.B=0,t.C=0,t.H=0;for(let i=0;i<t.c.length;i++)t.c[i].Xa();t.s=0,t.F=1/0,t.L=1/0,t.f=null},na=function(t){t.a&&1&t.a.a&&t.a.M(!0),t.b&&1&t.b.a&&t.b.M(!0)},ea=function(t){const i=t.a,a=t.b;i&&a&&pa(i,a,t.v)},sa=function(){ia.call(this),this.c.push(new Qi),this.K=null},ha=function(){ia.call(this),this.c.push(new Qi,new Qi),this.K=null,this.P=0},oa=function(){this.c=new pe,this.b=new pe,this.a=new pe,this.f=10},ra=function(t,i){i.f=t,i.a&&fa(t,i,i.a),i.b&&fa(t,i,i.b)},fa=function(t,i,a){t=t.c,a=a.id,t.length<=a&&t.Sa(a+1,null);let n=t.buffer[a];null===n&&(n=new pe,t.buffer[a]=n),n.add(i)},ca=function(t,i){const a=i.a,n=i.b;t=t.c.buffer,a&&et(t[a.id],i),n&&et(t[n.id],i)},la=function(){this.h=this.j=this.g=this.c=this.f=this.b=null},ba=function(){this.a=new Pt,this.c=new Zi,this.m=new la,this.b=new oa,this.f=[],this.s=new i(0,-9.8,0),this.j=new Uint32Array(32),this.h=new Set,this.g=new Set},ua=function(t,i){var a=Qo;return 0!==a.h.size&&a.h.has(Math.min(t.c,i.c)+(Math.max(t.c,i.c)<<16))},pa=function(t,i,a){var n=Qo;const e=Math.min(t.id,i.id);t=Math.max(t.id,i.id),a?n.g.add(e+(t<<16)):0!==n.g.size&&n.g.delete(e+(t<<16))},ya=function(t){N.call(this,2),this.body=t,this.a=[],this.N=!1,this.j=this.f=0,this.h=new i,this.c=new F,this.b=0},da=function(t){t.a.length=0,t.g.min.set(0,0,0),t.g.max.set(0,0,0),t.N=!1,t.f=0,t.j=0,K(t.c),t.b=0},ma=function(t,i){for(let a=0;a<t.a.length;a++)if(t.a[a].a.c===i)return t.a[a];return null},wa=function(t){return 4&t.b||2&t.b&&xa(t),t.h},ga=function(t){t.b|=1,t.b|=2},xa=function(t){t.b&=-3;var i=t.body;i=1&i.a?i.B:1/0,K(t.c);for(var a=0,n=0;n<t.a.length;n++)t.a[n].a.N||a++;if(0===a||1/0===i)(a=t.c.a).data[0]=a.data[4]=a.data[8]=1,t.c.c=i,t.h.set(0,0,0);else{for(a=0;a<t.a.length;a++)(n=t.a[a]).a.N||(n.a.va(Mr),Mr.transform(n.c,n.f),t.c.add(Mr));t.c.scale(i),4&t.b?(e(jr,t.h,-1),G(t.c,jr)):(t.h.l(t.c.b),t=t.c,e(jn,t.b,-1),G(t,jn),J(t))}},za=function(t,a){this.id=t,this.b=new ya(this),this.Fa=new z,this.C=new z,this.Za=-0,this.B=a||1/0,this.ya=1/a,this.a=17,this.H=Or,this.F=new i,this.v=new i,this.s=new u(0,0,0,1),this.g=new i,this.L=new i,this.f=new i,this.K=new i,this.R=7+Number.EPSILON,this.za=new y,d(this.za),this.Ga=new y,d(this.Ga),this.P=new P,this.h=this.c=this.$a=this.bb=0,this.$=.1,this.m=new i,this.j=new i,this.Ha=Ya(6),this.cache=new Sr(this),this._fauxComponent=this._component=null},va=function(t){return 8192&t.a?(t.a&=-8193,Br.qa(t.s,t.v),t.Fa.transform(function(t){if(!(1&t.b))return t.g;t.b&=-2;const i=t.g;if(i.min.x=i.min.y=i.min.z=1/0,i.max.x=i.max.y=i.max.z=-1/0,0===t.a.length)return i.min.x=i.min.y=i.min.z=0,i.max.x=i.max.y=i.max.z=0,i;for(let a=0;a<t.a.length;a++){const n=t.a[a];i.min.x=Math.min(i.min.x,n.b.min.x),i.min.y=Math.min(i.min.y,n.b.min.y),i.min.z=Math.min(i.min.z,n.b.min.z),i.max.x=Math.max(i.max.x,n.b.max.x),i.max.y=Math.max(i.max.y,n.b.max.y),i.max.z=Math.max(i.max.z,n.b.max.z)}return i}(t.b),Br),t.Fa):t.Fa},Ma=function(t){return 4096&t.a&&Ba(t),t.za},ja=function(t){return 4096&t.a&&Ba(t),t.Ga},ka=function(t,i){(!l(i,t.F)||2048&t.a)&&(t.F.l(i),t.s.A(t.na(),Dr),t.v.l(i),t.v.S(Dr),Fa(t))},Ia=function(t,i){p(i,t.s,Number.EPSILON)||(Er.l(t.W()),t.s.l(i),t.s.normalize(),Ea(t),ka(t,Er))},Ca=function(t,i){if(t.H===Or)return va(t);if(16384&t.a){var n=Wr;e(n,t.m,t.ya),n.add(t.g),n.scale(i),Mt(t,i,Xr),i=t.W(),Yr.qa(Xr,en),n=va(t),t.C.l(n),e(Ur,i,-1),M(t.C),t.C.transform(t.C,Yr),a(Ur,i,Wr),M(t.C),v(t.C,t.C,n),t.Za=Math.max(c(t.C.min,n.min),c(t.C.max,n.max)),t.a&=-16385}return t.C},Na=function(t,i){if(1&t.a||(t.a|=512),512&t.a)La(t);else{Oa(t,i);var a=!t.f.V();t.g.V()||(e(Hr,t.g,i),Hr.add(t.W()),ka(t,Hr)),a&&(Kr.l(t.f),(a=Kr.length())*i>Math.PI/4&&(a=Math.PI/4/i),.001>a?Kr.scale(.5*i-i*i*i*.020833333333*a*a):Kr.scale(Math.sin(.5*a*i)/a),Tr.x=Kr.x,Tr.y=Kr.y,Tr.z=Kr.z,Tr.w=Math.cos(a*i*.5),Tr.multiply(t.s),Ia(t,Tr)),t.b.N||(a=!!(512&t.a),5e-6>.5*(s(t.g)+s(t.f))?0<t.$&&(t.$=Math.max(0,t.$-i)):t.M(!0),a||0!==t.$||(t.a|=512)),La(t),(i=t.f.length())>t.R&&t.f.scale(t.R/i)}},Oa=function(t,i){e(Jr,t.m,t.ya),t.g.add(Jr),t.aa().A(t.j,Jr),t.f.add(Jr);const a=Math.max(0,1-t.bb*i);t.g.scale(a),t.L.scale(a),i=Math.max(0,1-t.$a*i),t.f.scale(i),t.K.scale(i),t.a|=16384},Pa=function(t){t.h&&(ja(t).U(t.f),t.f.x*=1&t.h?0:1,t.f.y*=2&t.h?0:1,t.f.z*=4&t.h?0:1,Ma(t).U(t.f));const i=t.f.length();i>t.R&&t.f.scale(t.R/i)},Aa=function(t){t.c&&(t.g.x*=1&t.c?0:1,t.g.y*=2&t.c?0:1,t.g.z*=4&t.c?0:1)},Sa=function(t){t.g.set(0,0,0),t.f.set(0,0,0),t.m.set(0,0,0),t.j.set(0,0,0),t.a|=16384},Ba=function(t){t.za.qa(t.s,t.W()),g(t.za,t.Ga),t.a&=-4097},La=function(t){t.m.set(0,0,0),t.j.set(0,0,0),t.g.S(t.L),t.f.S(t.K),t.L.set(0,0,0),t.K.set(0,0,0);const i=sf,a=t.Ha;for(let t=0;6>t;t++)i[a+t]=0;t.a=32&t.a?64|t.a:-65&t.a,t.a&=-33,t.a&=-129,t.a&=-257,t.a|=16384},Da=function(t){if(32768&t.a)for(var i=t.cache;i.a.length;)Ra(at(i.a));return t.a&=-32769,65536&(t=t.cache).body.a?(t.a.length!==t.body.b.a.length&&Ga(t,t.a),t=t.a):(i=new pe,Ga(t,i),t=i),t},Ea=function(t){t.a|=2048,Fa(t)},Fa=function(t){t.a|=1024,t.a|=4096,t.a|=8192,t.a|=16384,t.a|=32768,t.M()},Ga=function(t,i){const a=t.body.b.a;for(let n=0;n<a.length;n++){const e=$a(lf.pa);Ha(e,t.body,a[n]),i.add(e)}},Ja=function(){this.g=null,this.id="",this.m=this.b=null,this.h=new z,this.position=new i,this.j=new u,this.transform=new y,this.c=new y,this.a=0,this.f=-0,this.cache=new $r(this)},Ha=function(t,i,a){t.g=i,t.id=`${i.id}->${i.b.a.indexOf(a)}`,t.b=a.a,t.m=a,Ka(t)},Ka=function(t){var i=t.b;n(Qr,t.m.f,t.g.na()),Ma(t.g).A(Qr,t.position);var a=t.j,e=t.g.s,s=t.m.c;a.x=e.x*s.w+e.w*s.x+e.y*s.z-e.z*s.y,a.y=e.y*s.w+e.w*s.y+e.z*s.x-e.x*s.z,a.z=e.z*s.w+e.w*s.z+e.x*s.y-e.y*s.x,a.w=e.w*s.w-e.x*s.x-e.y*s.y-e.z*s.z,t.transform.qa(t.j,t.position),g(t.transform,t.c),t.h.transform(i.g,t.transform),t.a=t.g.a,i=t.g,t.f=2!==i.H?0:i.Za},Ta=function(t){return(t=t.cache).b?t=t.b:65536&t.a.g.a?(t.b=Li(t.a,t.g),t=t.b):t=Li(t.a,t.g),t},_a=function(t){return(t=t.cache).c?t=t.f:(65536&t.a.g.a&&(t.c=!0),t=Pi(t.a,t.f)),t},Ra=function(t){var i=t.cache;null!==i.b&&(i.b.b(),i.b=null),i.c=!1,bf(lf.pa,t)},Va=function(){this.B=this.C=this.H=this.v=this.j=this.h=null,this.s=!1,this.f=new i,this.b=new i,this.a=new i,this.c=new i,this.P=this.R=this.g=0,this.L=this.K=null,this.m=0,this.$=new i},qa=function(t){var i=t.v;t.v=t.H,t.H=i,i=t.C,t.C=t.B,t.B=i,i=t.b,t.b=t.a,t.a=i,t.c.scale(-1)},Ua=function(t){n(t.$,null==t.H?en:t.H.g,null==t.v?en:t.v.g)},Wa=function(t){const i=$a(lf.O);return i.h=t.h,i.j=t.j,i.v=t.v,i.H=t.H,i.C=t.C,i.B=t.B,i.s=t.s,i.f.l(t.f),i.b.l(t.b),i.a.l(t.a),i.c.l(t.c),i.g=t.g,i.R=t.R,i.P=t.P,i.m=t.m,i},Xa=function(t,i){rf[t][ff[t]-1]=i,ff[t]--},Ya=function(t){const i=hf;if(t=i+t,sf.length>t)return hf=t,i;throw Error("Pre-allocated buffer overflow: memory leak?")},Za=function(t,i){if(of.length!==t||rf.length!==t)throw Error("Items should be initialized in ascending order");of.push(i),rf.push([]),ff.push(0),cf.push([])},$a=function(t){const i=ff[t],a=rf[t];if(i===a.length)for(let i=0;64>i;i++)a.push(of[t]());return ff[t]++,a[i]},Qa=function(){for(let t=0;t<cf.length;t++)for(;0!==cf[t].length;)Xa(t,cf[t].pop())},tn=function(t,i){Object.keys(i).forEach((a=>{const n=i[a];n!==a&&Object.defineProperty(t,n,{get(){return this[a]},set(t){this[a]=t}})}))},an=function(t,i,a){if(t[a]!==i){if(t[a])throw Error('Name "'+a+'" was taken after minification');t[a]=i}},nn=function(t){0>t.name.length&&(t.name="")};i.prototype={set:function(t,i,a){this.x=t,this.y=i,this.z=a},l:function(t){this.x=t.x,this.y=t.y,this.z=t.z},add:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},S:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},multiply:function(t){this.x*=t.x,this.y*=t.y,this.z*=t.z},scale:function(t){this.x*=t,this.y*=t,this.z*=t},length:function(){return Math.sqrt(s(this))},normalize:function(t=1e-5){const i=this.length();return i<t?this.z=this.y=this.x=0:(t=1/i,this.x*=t,this.y*=t,this.z*=t),i},i:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},V:function(t=1e-5){return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t}};var en=new i(0,0,0),sn=new i(1,0,0),hn=new i(0,1,0),on=new i(0,0,1),rn=new i;u.prototype={set:function(t,i,a,n){this.x=t,this.y=i,this.z=a,this.w=n},l:function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},toString:function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},multiply:function(t){const i=this.x,a=this.y,n=this.z,e=this.w,s=t.x,h=t.y,o=t.z;t=t.w,this.x=i*t+e*s+a*o-n*h,this.y=a*t+e*h+n*s-i*o,this.z=n*t+e*o+i*h-a*s,this.w=e*t-i*s-a*h-n*o},normalize:function(){let t=this.length();1e-5>t?this.x=this.y=this.z=this.w=0:(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t)},a:function(t){var i=t.x;const a=t.y,n=t.z,e=this.x,s=this.y,h=this.z,o=this.w,r=o*i+s*n-h*a,f=o*a+h*i-e*n,c=o*n+e*a-s*i;i=-e*i-s*a-h*n,t.x=r*o+i*-e+f*-h-c*-s,t.y=f*o+i*-s+c*-e-r*-h,t.z=c*o+i*-h+r*-s-f*-e},A:function(t,i){var a=t.x;const n=t.y,e=t.z;t=this.x;const s=this.y,h=this.z,o=this.w,r=o*a+s*e-h*n,f=o*n+h*a-t*e,c=o*e+t*n-s*a;a=-t*a-s*n-h*e,i.x=r*o+a*-t+f*-h-c*-s,i.y=f*o+a*-s+c*-t-r*-h,i.z=c*o+a*-h+r*-s-f*-t},length:function(){const t=this.x,i=this.y,a=this.z,n=this.w;return Math.sqrt(t*t+i*i+a*a+n*n)},V:function(){return(0===this.x||1e-5>Math.abs(this.x))&&(0===this.y||1e-5>Math.abs(this.y))&&(0===this.z||1e-5>Math.abs(this.z))}};var fn=new u;y.prototype={l:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.v=t.v,this.f=t.f,this.g=t.g,this.h=t.h,this.B=t.B,this.j=t.j,this.m=t.m,this.s=t.s,this.C=t.C,this.F=t.F,this.H=t.H,this.K=t.K,this.L=t.L},qa:function(t,i){var a=t.x+t.x,n=t.y+t.y;const e=t.z+t.z,s=t.x*a,h=t.x*n,o=t.x*e,r=t.y*n,f=t.y*e,c=t.z*e;a*=t.w,n*=t.w,t=t.w*e,this.a=1-(r+c),this.f=h+t,this.j=o-n,this.F=0,this.b=h-t,this.g=1-(s+c),this.m=f+a,this.H=0,this.c=o+n,this.h=f-a,this.s=1-(s+r),this.K=0,this.v=i.x,this.B=i.y,this.C=i.z,this.L=1},A:function(t,i){i.x=this.a*t.x+this.b*t.y+this.c*t.z+this.v,i.y=this.f*t.x+this.g*t.y+this.h*t.z+this.B,i.z=this.j*t.x+this.m*t.y+this.s*t.z+this.C},U:function(t){const i=t.x,a=t.y,n=t.z;t.x=this.a*i+this.b*a+this.c*n,t.y=this.f*i+this.g*a+this.h*n,t.z=this.j*i+this.m*a+this.s*n},multiply:function(t){const i=this.a,a=this.f,n=this.j,e=this.F,s=this.b,h=this.g,o=this.m,r=this.H,f=this.c,c=this.h,l=this.s,b=this.K,u=this.v,p=this.B,y=this.C,d=this.L;let m=t.a,w=t.f,g=t.j,x=t.F;this.a=m*i+w*s+g*f+x*u,this.f=m*a+w*h+g*c+x*p,this.j=m*n+w*o+g*l+x*y,this.F=m*e+w*r+g*b+x*d,m=t.b,w=t.g,g=t.m,x=t.H,this.b=m*i+w*s+g*f+x*u,this.g=m*a+w*h+g*c+x*p,this.m=m*n+w*o+g*l+x*y,this.H=m*e+w*r+g*b+x*d,m=t.c,w=t.h,g=t.s,x=t.K,this.c=m*i+w*s+g*f+x*u,this.h=m*a+w*h+g*c+x*p,this.s=m*n+w*o+g*l+x*y,this.K=m*e+w*r+g*b+x*d,m=t.v,w=t.B,g=t.C,x=t.L,this.v=m*i+w*s+g*f+x*u,this.B=m*a+w*h+g*c+x*p,this.C=m*n+w*o+g*l+x*y,this.L=m*e+w*r+g*b+x*d}},Object.defineProperty(y.prototype,"data",{get:function(){return[this.a,this.f,this.j,this.F,this.b,this.g,this.m,this.H,this.c,this.h,this.s,this.K,this.v,this.B,this.C,this.L]}}),z.prototype={l:function(t){this.min.x=t.min.x,this.min.y=t.min.y,this.min.z=t.min.z,this.max.x=t.max.x,this.max.y=t.max.y,this.max.z=t.max.z},transform:function(t,i){for(cn.set(0,0,0),i.A(cn,ln),bn[0]=t.min.x,bn[1]=t.min.y,bn[2]=t.min.z,un[0]=t.max.x,un[1]=t.max.y,un[2]=t.max.z,pn[0]=ln.x,pn[1]=ln.y,pn[2]=ln.z,yn[0]=ln.x,yn[1]=ln.y,yn[2]=ln.z,dn[0]=i.a,dn[1]=i.b,dn[2]=i.c,dn[3]=i.f,dn[4]=i.g,dn[5]=i.h,dn[6]=i.j,dn[7]=i.m,dn[8]=i.s,t=0;3>t;t++)for(i=0;3>i;i++){const a=dn[3*t+i]*bn[i],n=dn[3*t+i]*un[i];a<n?(pn[t]+=a,yn[t]+=n):(pn[t]+=n,yn[t]+=a)}this.min.set(pn[0],pn[1],pn[2]),this.max.set(yn[0],yn[1],yn[2])},Sa:function(t){0<t.x?this.max.x+=t.x:this.min.x+=t.x,0<t.y?this.max.y+=t.y:this.min.y+=t.y,0<t.z?this.max.z+=t.z:this.min.z+=t.z}};var cn=new i,ln=new i,bn=[-0,-0,-0],un=[-0,-0,-0],pn=[-0,-0,-0],yn=[-0,-0,-0],dn=[-0,-0,-0,-0,-0,-0,-0,-0,-0],mn=new i;P.prototype={set(t,i,a,n,e,s,h,o,r){this.data[0]=t,this.data[1]=n,this.data[2]=h,this.data[3]=i,this.data[4]=e,this.data[5]=o,this.data[6]=a,this.data[7]=s,this.data[8]=r},A:function(t,i){i.x=this.data[0]*t.x+this.data[3]*t.y+this.data[6]*t.z,i.y=this.data[1]*t.x+this.data[4]*t.y+this.data[7]*t.z,i.z=this.data[2]*t.x+this.data[5]*t.y+this.data[8]*t.z},add(t){for(let i=0;9>i;i++)this.data[i]+=t.data[i]},S(t){for(let i=0;9>i;i++)this.data[i]-=t.data[i]},multiply:function(t){const i=this.data[0],a=this.data[3],n=this.data[6],e=this.data[1],s=this.data[4],h=this.data[7],o=this.data[2],r=this.data[5],f=this.data[8],c=t.data[0],l=t.data[3],b=t.data[6],u=t.data[1],p=t.data[4],y=t.data[7],d=t.data[2],m=t.data[5];t=t.data[8],this.data[0]=c*i+u*a+d*n,this.data[1]=c*e+u*s+d*h,this.data[2]=c*o+u*r+d*f,this.data[3]=l*i+p*a+m*n,this.data[4]=l*e+p*s+m*h,this.data[5]=l*o+p*r+m*f,this.data[6]=b*i+y*a+t*n,this.data[7]=b*e+y*s+t*h,this.data[8]=b*o+y*r+t*f},get(t,i){return this.data[3*i+t]},l:function(t){for(let i=0;9>i;i++)this.data[i]=t.data[i]}},F.prototype={transform(t,i){A(wn,t),L(this.a,wn,this.a);{var a=wn;const t=a.data[3],i=a.data[6],n=a.data[1],e=a.data[4],s=a.data[7],h=a.data[2],o=a.data[5],r=a.data[8];a.data[0]=a.data[0],a.data[1]=t,a.data[2]=i,a.data[3]=n,a.data[4]=e,a.data[5]=s,a.data[6]=h,a.data[7]=o,a.data[8]=r}this.a.multiply(wn),t.a(this.b),J(this),G(this,i)},add(t){const i=this.c+t.c;e(vn,this.b,this.c),e(Mn,t.b,t.c),a(this.b,vn,Mn),this.b.scale(1/i),this.c=i,this.a.add(t.a),J(this)},scale(t){t/=this.c,D(this.a,t),this.c*=t,J(this)}};var wn=new P,gn=new P,xn=new P,zn=new i,vn=new i,Mn=new i,jn=new i,kn=new P,In=new P,Cn=new u;(T.prototype=Object.create(N.prototype)).va=function(){throw Error("Not implemented")};var Nn=new i,On=new i,Pn=new i,An=new i,Sn=new i,Bn=new i,Ln=new i,Dn=new i,En=new i,Fn=new i,Gn=new i,Jn=new i,Hn=new i,Kn=new i,Tn=new i,_n=new i,Rn=new i,Vn=new i,qn=new i,Un=new i,Wn=new i,Xn=new i,Yn=new i,Zn=new i,$n=new i,Qn=new i,te=new i,ie=new i,ae=new i,ne=new i,ee=new i,se=new i;(tt.prototype=Object.create(N.prototype)).T=function(t,i){let a=-1/0,n=t.i(this.D);n>a&&(i.l(this.D),a=n),n=t.i(this.I),n>a&&(i.l(this.I),a=n),n=t.i(this.G),n>a&&i.l(this.G)};var he=new i,oe=new i,re=new i,fe=new i,ce=new i,le=new i,be=new i,ue=new i;it.prototype={c(){bf(lf.ha,this)}};var pe=class{constructor(){this.buffer=[],this.length=0}add(t){this.buffer.length>this.length?this.buffer[this.length]=t:this.buffer.push(t),this.length++}Sa(t,i){if(!(this.length>=t))if(this.buffer.length>=t)this.length=t;else for(this.length=this.buffer.length;this.length<t;)this.add(i)}fill(t){this.buffer.fill(t)}indexOf(t){for(let i=0;i<this.length;i++)if(this.buffer[i]===t)return i;return-1}clear(){this.length=0}},ye=null,de=null,me=null,we=class{constructor(){this.ca=new i,this.da=new i,this.u=new i,this.a={sa:{$b:new i}}}sa(t,i,a){const s=this.a.sa.$b;t.T(a,this.ca),e(s,a,-1),i.T(s,this.da),n(this.u,this.ca,this.da)}};ye=new class{constructor(){this.a=new we,this.b=new we,this.c={ta:{Ac:new i},X:{ea:new i,Va:new i}}}J(t,i){st(this.a,t),st(this.b,i)}ta(t){U(this.a.u,this.b.u,en,t)}ma(){return this}X(t,i,a){const n=this.c.X.ea,s=this.c.X.Va,h=this.b.u,o=this.a.ca,r=this.a.da,f=this.b.ca,c=this.b.da;Y(t,this.a.u,h,h,n),e(i,o,n.x),e(s,f,n.y),i.add(s),e(a,r,n.x),e(s,c,n.y),a.add(s)}fa(t){const i=de;return i.J(this.a,this.b,t),i}},de=new class{constructor(){this.a=new we,this.b=new we,this.c=new we,this.o=new i,this.f={J:{Na:new i,Nb:new i},ma:{ea:new i},X:{ea:new i,Va:new i},fa:{Na:new i,Gb:new i,Ob:new i,Pb:new i}}}J(t,i,a){const e=this.f.J.Na,s=this.f.J.Nb;st(this.a,t),st(this.b,i),st(this.c,a),n(e,i.u,t.u),n(s,a.u,t.u),r(this.o,e,s)}ta(t){W(en,this.a.u,this.b.u,this.c.u,t)}ma(t){var i=this.f.ma.ea;Y(t,this.a.u,this.b.u,this.c.u,i),t=1e-5<Math.abs(i.x);var a=1e-5<Math.abs(i.y);return i=1e-5<Math.abs(i.z),t&&a&&i?this:(i=ye,t?a?(t=this.a,a=this.b):(t=this.a,a=this.c):(t=this.b,a=this.c),i.J(t,a),i)}X(t,i,a){const n=this.f.X.ea,s=this.f.X.Va,h=this.a.ca,o=this.a.da,r=this.b.ca,f=this.b.da,c=this.c.ca,l=this.c.da;Y(t,this.a.u,this.b.u,this.c.u,n),e(i,h,n.x),e(s,r,n.y),i.add(s),e(s,c,n.z),i.add(s),e(a,o,n.x),e(s,f,n.y),a.add(s),e(s,l,n.z),a.add(s)}fa(t){var i=this.f.fa.Na;const a=this.f.fa.Gb;var e=this.f.fa.Ob,s=this.f.fa.Pb;const h=this.a.u,o=this.b.u;var f=this.c.u;return 1e-5>Math.abs(h.i(this.o)-t.u.i(this.o))?(n(i,h,o),n(a,f,h),n(e,o,f),r(s,this.o,i),s.normalize(),i=1e-5<V(o,s,t.u),r(s,this.o,e),s.normalize(),e=1e-5<V(f,s,t.u),st(i?this.c:e?this.a:this.b,t),this):(e=me,s=this.a,f=this.b,i=this.c,t.u.i(this.o)>s.u.i(this.o)?e.J(s,f,i,t):e.J(s,f,t,i),e)}},me=new class{constructor(){this.a=new we,this.g=new we,this.b=new we,this.f=new we,this.c=-1}J(t,i,a,n){st(this.a,t),st(this.g,i),st(this.b,a),st(this.f,n),t=this.a.u,i=this.g.u,a=this.b.u,n=this.f.u,t=!(l(t,i)||l(t,a)||l(t,n)||l(i,a)||l(i,n)||l(a,n)),this.c=-1}ta(t){{var i=this.a.u,a=this.g.u,e=this.b.u,s=this.f.u;n(Rn,a,s),n(Vn,i,s),n(qn,e,s);let o=-1;var h=!0;let c=1/0;r(Tn,qn,Vn),Tn.i(s)<=Tn.i(en)&&(W(en,s,e,i,_n),(h=f(en,_n))<c&&(t.l(_n),c=h,o=0),h=!1),r(Tn,Rn,qn),Tn.i(s)<=Tn.i(en)&&(W(en,s,a,e,_n),(h=f(en,_n))<c&&(t.l(_n),c=h,o=1),h=!1),r(Tn,Vn,Rn),Tn.i(s)<=Tn.i(en)&&(W(en,s,i,a,_n),(s=f(en,_n))<c&&(t.l(_n),c=s,o=2),h=!1),n(Rn,e,i),n(Vn,a,i),r(Tn,Rn,Vn),Tn.i(i)<=Tn.i(en)&&(W(en,i,e,a,_n),f(en,_n)<c&&(t.l(_n),o=3),h=!1),h&&t.l(en),t=o}this.c=t}ma(t){let i,a,n;0===this.c?(i=this.f,a=this.b,n=this.a):1===this.c?(i=this.f,a=this.g,n=this.b):(2===this.c?(i=this.f,a=this.a):(i=this.a,a=this.b),n=this.g);const e=de;return e.J(i,a,n),e.ma(t)}X(){throw Error("Cannot extract coordinates from 3-simplex: should be simplified to 2-simplex first")}fa(){throw Error("Cannot extend 3-simplex: should be simplified to 2-simplex first")}};var ge=new i,xe=new i,ze=new i,ve=new we,Me=new we,je=new we,ke=new class{constructor(){this.position=new i}J(t){this.position.l(t)}T(t,i){i.l(this.position)}},Ie=new i,Ce=new class{constructor(){this.position=new i,this.b=new i,this.a=new i}J(t,i){a(this.position,t,i),this.position.scale(.5),this.b.l(t),this.a.l(i)}T(t,i){this.b.i(t)>(t=this.a.i(t))?i.l(this.b):i.l(this.a)}},Ne=new class{constructor(){this.D=new i,this.I=new i,this.G=new i,this.position=new i}J(t,i,n){this.D.l(t),this.I.l(i),this.G.l(n),a(this.position,this.D,this.I),this.position.add(this.G),this.position.scale(1/3)}T(t,i){const a=this.D.i(t),n=this.I.i(t);t=this.G.i(t),a>n&&a>t?i.l(this.D):n>t?i.l(this.I):i.l(this.G)}};ot.prototype.get=function(t){if(t>=this.b-this.a)throw Error("Slice overflow");return this.buffer[this.a+t]},ot.prototype.indexOf=function(t){for(let i=0;i<this.b-this.a;i++)if(this.get(i)===t)return i;return-1},rt.prototype={};var Oe=new z;(wt.prototype=Object.create(T.prototype)).v=function(){const t=new wt(this.c,this.b,this.s,this.a,this.N);return t.j=this.j,t.f=gt(this),t.h=xt(this),t},wt.prototype.T=function(){throw Error("Not implemented for the mesh shape")},wt.prototype.wa=function(t,i){let a=null;const s=[xt(this)];for(;0<s.length;){var h=s.pop();if(I(h.a,t,i))if(h.b){h=h.b;var o=t,f=i;n(re,h.I,h.D),n(fe,h.G,h.D),r(ce,re,fe),n(le,f,o);var c=-le.i(ce);if(0>=c)h=null;else if(n(be,o,h.D),0>(f=be.i(ce)/c)||1<f)h=null;else{r(ue,be,le);var l=fe.i(ue)/c;1.00001<l+(c=-re.i(ue)/c)||0>l||0>c?h=null:((l=$a(lf.ha)).b=h,l.a=f*le.length(),e(l.u,le,f),l.u.add(o),l.o.l(h.o),Y(l.u,h.D,h.I,h.G,l.ea),l.g=h.a,h=l)}h&&(!a||a.a>h.a)&&(a=h)}else s.push(h.f,h.g)}return a};var Pe=new i,Ae=new i,Se=new u,Be=new i,Le=new i,De=new i,Ee=new pe,Fe=new pe,Ge=new pe,Je=new i,He=new pe,Ke=new pe,Te=new pe,_e=class{constructor(){this.g=this.c=1/0,this.a=null,this.f=1/0}},Re=new i,Ve=new i,qe=new i,Ue=class extends _e{J(t){this.a=t}h(t,i,a){return ht(t,this.a,i,a)}j(t){return j(this.a.h,t)}},We=class extends _e{constructor(){super(),this.D=new i,this.I=new i,this.G=new i,this.b=new z}J(t,i){i.transform.A(t.D,this.D),i.transform.A(t.I,this.I),i.transform.A(t.G,this.G),this.b.min.x=Math.min(this.D.x,this.I.x,this.G.x),this.b.min.y=Math.min(this.D.y,this.I.y,this.G.y),this.b.min.z=Math.min(this.D.z,this.I.z,this.G.z),this.b.max.x=Math.max(this.D.x,this.I.x,this.G.x),this.b.max.y=Math.max(this.D.y,this.I.y,this.G.y),this.b.max.z=Math.max(this.D.z,this.I.z,this.G.z),this.a=i}h(t,i,a){return Ne.J(this.D,this.I,this.G),ht(t,Ne,i,a)}j(t){return j(this.b,t)}};Ot.prototype={J(t){this.body=t}},Pt.prototype.g=function(t){this.c.clear(),this.f.clear();for(var i=0;i<this.a.length;i++){var a=this.a[i],n=t,e=a.body;a.a=vt(e);var s=Ca(e,n);n=s.min,s=s.max;var h=a.buffer;h[0]=n.x,h[1]=n.y,h[2]=n.z,h[3]=s.x,h[4]=s.y,h[5]=s.z,a.c=!!(4&e.a),a.b=!!(512&e.a),a.a=vt(e)}for(this.a.sort(It),e=0;e<this.a.length;e++){a=this.a[e];var o=e+1;i=t,n=this.a,s=this.c,h=a.buffer[3];const f=s.length;for(a.a&&(o=0);o<n.length;o++){const t=n[o];if(a!==t){if(t.buffer[0]>=h)break;var r;if(!(r=a.b&&t.b)&&!(r=!a.a&&t.a)&&!(r=a.c&&t.c)){{r=a.buffer;const i=t.buffer;r=r[1]<i[4]&&r[4]>i[1]&&r[2]<i[5]&&r[5]>i[2]}r=!r}r||(s.add(a.body),s.add(t.body))}}a.a&&f!==s.length&&this.h(a.body,i,f,s.length)}},Pt.prototype.h=function(t,i,a,n){Xe.clear();const e=h(Ye,t.g)*i;if(!(1e-5>e)){i=[];var s=va(t),o=Ct(s),r=(s=Nt(s))-o;if(!(1e-5>r)){for(var f=this.c.buffer;a<n;a+=2){const t=f[a+1];var c=va(t),l=Ct(c);const n=Nt(c);c=.1*Math.max(r,n-l);{var b=o;let t=n;o<l&&(b=l,t=s),b=Math.max(0,b-t)}1e-5<(l=e-b-Math.max(0,Math.min(s,n)-Math.max(o,l)))&&l>c?i.push(t):Xe.add(t)}if(0<i.length){for(n=0;n<Xe.length;n++)i.push(Xe.buffer[n]);i.push(t),this.f.add(i)}}}};var Xe=new pe,Ye=new i,Ze=new i,$e=new i,Qe=new i,ts=new i,is=new i,as={9:{9:2,10:2,12:2,17:1,18:1,20:1},10:{9:2,10:0,12:0,17:1,18:1,20:1},12:{9:2,10:0,12:0,17:1,18:1,20:0},17:{9:1,10:1,12:1,17:1,18:1,20:1},18:{9:1,10:1,12:1,17:1,18:1,20:1},20:{9:1,10:1,12:0,17:1,18:1,20:0}};Kt.prototype={};var ns=[1/6,1/24,1/24,1/24,1/60,1/60,1/60,1/120,1/120,1/120],es=new i,ss=new i,hs=new i;_t.prototype=Object.create(T.prototype),t.k=_t.prototype,t.k.T=function(t,i){if(this.H){const a=this.g.max;i.set(0>t.x?-a.x:a.x,0>t.y?-a.y:a.y,0>t.z?-a.z:a.z)}else t=Zt(this,t),i.l(t.position)},t.k.xb=function(){const t=new _t(this.c,this.h,this.a,this.H,this.N);return t.j=this.j,t.f=Rt(this),this.v||Xt(this),t.v=this.v,t.b=Vt(this),t.s=qt(this),t.C=Ut(this),t.F=Wt(this),t.B=Qt(this),t},t.k.wa=function(t,i){n(rs,i,t),i=0;let a=null;var s=!0;const h=Vt(this);for(let n=0;n<h.length;n++){const e=h[n],o=li(e,t),r=e.o.i(rs),f=-o/r;if(0<o&&(s=!1),!(1e-5<r))if(-1e-5>r)f>i&&(i=f,a=e);else if(1e-5<o)return null}return s||!a||0>i||1<i?null:((s=$a(lf.ha)).b=this,s.a=i*rs.length(),e(s.u,rs,i),s.u.add(t),s.o.l(a.o),s)},t.k.va=function(t){if(this.H){var i=this.g.max,a=i.x,n=i.y,e=i.z;K(t);var s=1/3*(i=8*a*n*e);a*=a,n*=n,e*=e,t.a.set((n+e)*s,0,0,0,(a+e)*s,0,0,0,(a+n)*s),t.c=i}else i=Qt(this),K(t),t.a.data[0]=i.a[5]+i.a[6],t.a.data[4]=i.a[4]+i.a[6],t.a.data[8]=i.a[4]+i.a[5],t.a.data[1]=t.a.data[3]=-i.a[7],t.a.data[5]=t.a.data[7]=-i.a[8],t.a.data[2]=t.a.data[6]=-i.a[9],s=i.a[0],t.b.set(i.a[1]/s,i.a[2]/s,i.a[3]/s),t.c=s},t.k.cb=function(){let t=null,i=null;for(var a=0;a<fs.length;a++){for(var e=1/0,s=-1/0,h=0;h<this.h.length;h++){var o=this.h[h].i(fs[a]);o<e?(t=this.h[h],e=o):o>s&&(i=this.h[h],s=o)}if(null!==t&&null!==i&&s>e)break;i=t=null}if(null===t||null===i)throw Error("Degenerate point cloud, either 1D or 2D");for(a=null,e=-1/0,s=0;s<this.h.length;s++)if((h=this.h[s])!==t&&h!==i){o=h;var f=t,c=i;n(En,f,c),n(Fn,f,o),n(Gn,c,o),(o=0>=(o=Fn.i(En))?Fn.i(Fn):o>=(f=En.i(En))?Gn.i(Gn):Fn.i(Fn)-o*o/f)>e&&(e=o,a=h)}if(null===a||Math.abs(e)<Number.EPSILON)throw Error("Degenerate point cloud in 2D");for(n(ls,t,i),n(bs,a,i),r(cs,ls,bs),cs.normalize(Number.EPSILON),s=i.i(cs),e=null,h=-1/0,o=0;o<this.h.length;o++)(f=this.h[o])!==t&&f!==i&&f!==a&&(c=Math.abs(cs.i(f)-s))>h&&(h=c,e=f);if(null===e||Math.abs(h)<Number.EPSILON)throw Error("Degenerate point cloud in 2D");h=new oi(t),o=new oi(i),f=new oi(a),c=new oi(e);const l=0>e.i(cs)-s;if(s=this.b=[],l)for(s.push(ei(h,o,f)),s.push(ei(c,o,h)),s.push(ei(c,f,o)),s.push(ei(c,h,f)),h=0;3>h;h++)o=(h+1)%3,fi(ui(s[h+1],1),ui(s[o+1],0)),fi(ui(s[h+1],2),ui(s[0],o));else for(s.push(ei(h,f,o)),s.push(ei(c,h,o)),s.push(ei(c,o,f)),s.push(ei(c,f,h)),h=0;3>h;h++)fi(ui(s[h+1],0),ui(s[(h+1)%3+1],1)),fi(ui(s[h+1],2),ui(s[0],(3-h)%3));for(s=0;s<this.h.length;s++)(h=this.h[s])!==t&&h!==i&&h!==a&&h!==e&&si(new oi(h),this.b)},t.k.gb=function(){for(var t=ai(this);null!==t;){var i=t.f,a=t;(t=a.c)[t.indexOf(i)]=t[t.length-1],t.pop(),t=[],ni(this,i.position,null,a,t);t:if(3>t.length)a=!1;else{for(a=0;a<t.length;a++){var n=t[a],e=a===t.length-1?t[0]:t[a+1];if(n.c.a!==(0===a?t[t.length-1]:t[a-1]).a||n.a!==e.c.a){a=!1;break t}}a=!0}a=[],e=n=null;for(let h=0;h<t.length;h++){var s=t[h];const o=ei(i,s.c.a,s.a);a.push(o),fi(ui(o,2),s.c),s=o.a,null!==n?fi(s.b,n):e=s,n=s}for(fi(e.b,n),i=a,t=0;t<i.length;t++){a=i[t];do{n=ii(a,i)}while(n);this.b.push(a)}for(t=ti(this),a=0;a<t.length;a++)si(t[a],i);t=ai(this)}},t.k.fb=function(){for(let t=0;t<this.b.length;t++)ii(this.b[t],[])&&(ti(this),t=0)},t.k.eb=function(){this.s=[],this.f=[],this.v=[],this.C=[],this.h=[];for(let a=0;a<this.b.length;a++){const e=this.b[a];let s=e.a;hi(this.s,e.o)||this.s.push(e.o);do{if(-1===this.v.indexOf(s)){this.v.push(s);const a=new i;n(a,s.a.position,s.c.a.position);var t=a;t.normalize(Number.EPSILON),t.normalize(Number.EPSILON),hi(this.C,a)||this.C.push(a),s.c.a.a.push(s)}t=s.a,-1===this.f.indexOf(t)&&(this.f.push(t),this.h.push(t.position)),s=s.b}while(s!==e.a)}};var os=new z,rs=new i,fs=[sn,hn,on],cs=new i,ls=new i,bs=new i,us=new i,ps=new i,ys=0,ds=1,ms=[-0,-0],ws=[-0,-0];di.prototype.J=function(t,i,a){this.c=i,this.f=a},di.prototype.a=function(t,i){const a=this.c,n=this.f;let e=a[0].i(t),s=e;for(let i=1;i<n;i++){const n=a[i].i(t);n>e?e=n:n<s&&(s=n)}i[0]=s,i[1]=e},di.prototype.b=function(){bf(lf.ia,this)},mi.prototype.J=function(t){this.c=t},mi.prototype.a=function(t,i){e(gs,t,-1),i[0]=-wi(this,gs),i[1]=wi(this,t)},mi.prototype.b=function(){bf(lf.Z,this)};var gs=new i,xs=new i;gi.prototype.J=function(t,i,a){this.c=t,this.g.l(i),this.f.l(a)},gi.prototype.a=function(t,i){e(Ms,t,-1),i[0]=-xi(this,Ms),i[1]=xi(this,t)},gi.prototype.b=function(){bf(lf.xa,this)};var zs=new i,vs=new i,Ms=new i;zi.prototype.J=function(t,i,a,n){this.f=t,this.a.l(i),this.o.l(a),this.b=n},vi.prototype.J=function(t,i,a,n,e,s){this.f=t,this.j=i,this.h=a,this.a.l(n),this.o.l(e),this.b=s},Mi.prototype.J=function(t,i,a,n){this.f=t,this.a=i,this.o.l(a),this.b=n};var js=new i,ks=new i,Is=new i,Cs=new i,Ns=[new i,new i],Os=[new i,new i],Ps=new i,As=new i,Ss=new i,Bs=new pe,Ls=new pe,Ds=new i,Es=new i;(Fi.prototype=Object.create(T.prototype)).va=function(t){{var i=this.b,a=this.f;K(t);const n=4/3*Math.PI*i*i*i+Math.PI*i*i*2*a,e=Math.PI*i*i,s=e*(8/15*i*i*i+a*i*i*1.5+4/3*a*i*a+2/3*a*a*a);t.a.set(s,0,0,0,e*(8/15*i*i*i+a*i*i),0,0,0,s),t.c=n}},Fi.prototype.T=function(t,i){h(_s,t),e(i,_s,this.b),i.y+=Math.sign(t.y)*this.f},Fi.prototype.wa=function(t,i){if(Fs.set(0,this.f,0),Gs.set(0,-this.f,0),U(Fs,Gs,t,Ks),c(t,Ks)<=this.b)return null;if(n(Js,i,t),i=Js.normalize(),1e-5>Math.abs(i))return null;t:{var a=this.b,s=Js,h=Fs,o=Gs;n(Hs,o,h),n(Ks,t,h),h=Hs.i(Hs);var r=Hs.i(s);const i=Hs.i(Ks);var f=s.i(Ks),l=Ks.i(Ks),b=h-r*r;if(0<=(l=(f=h*f-i*r)*f-b*(h*l-i*i-a*a*h))){if(0<(r=i+(b=(-f-Math.sqrt(l))/b)*r)&&r<h){a=b;break t}if(0>=r?Ts.l(Ks):n(Ts,t,o),0<(l=(f=s.i(Ts))*f-(a=Ts.i(Ts)-a*a))){a=-f-Math.sqrt(l);break t}}a=-1}return 0>a||a>i?null:((i=$a(lf.ha)).b=this,e(i.u,Js,a),i.u.add(t),i.a=a,i.o.x=i.u.x,i.o.z=i.u.z,i.o.y=i.u.y<-this.f?i.u.y+this.f:i.u.y>this.f?i.u.y-this.f:0,i.o.scale(1/this.b),i)};var Fs=new i,Gs=new i,Js=new i,Hs=new i,Ks=new i,Ts=new i,_s=new i;(Gi.prototype=Object.create(T.prototype)).va=function(t){{var i=this.b;K(t);const a=4/3*Math.PI*i*i*i;i=a*i*i*.4,t.a.set(i,0,0,0,i,0,0,0,i),t.c=a}},Gi.prototype.T=function(t,i){h(Vs,t),e(i,Vs,this.b)},Gi.prototype.wa=function(t,i){if(n(Rs,i,t),i=Rs.normalize(),1e-5>Math.abs(i))return null;const a=t.i(Rs);var o=s(t)-this.b*this.b;if(Math.abs(a)<this.b||0<=a&&0<=o)return null;if(0>(o=a*a-o))return null;const r=Math.sqrt(o);return 0>(o=-a-r)&&(o=-a+r),o>i?null:((i=$a(lf.ha)).b=this,e(i.u,Rs,o),i.u.add(t),i.a=o,h(i.o,i.u),i)};var Rs=new i,Vs=new i,qs=new i,Us=new i,Ws=new i,Xs=new i,Ys=new i,Zs=new i,$s=new i,Qs=new i,th=new i,ih=new i,ah=new i,nh=new i,eh=new i,sh=new i,hh=new i,oh=new i,rh=new i,fh=new i,ch=new i,lh=new i,bh=new i,uh=new i,ph=new i,yh=new i,dh=new i,mh=new i,wh=new i,gh=new i,xh=new i,zh=new i,vh=new i,Mh=new i,jh=new i,kh=new i,Ih=new i,Ch=new i,Nh=new i,Oh=new i,Ph=[],Ah=new i,Sh=new i,Bh=new i,Lh=new u,Dh=new i,Eh=new i,Fh=new i,Gh=new i,Jh=new i,Hh=new i,Kh=new i,Th=new i,_h=new i,Rh=new i,Vh=new i,qh=new i,Uh=new Map,Wh=new i,Xh=[],Yh=[],Zh=[],$h=[],Qh=[],to=new pe,io=new i,ao=new i,no=new i,eo=new i,so=new i,ho=new i,oo=new i,ro=new i,fo=new i,co=new i,lo=new i,bo=new i,uo=new i,po=new i,yo=new i,mo=new i,wo=new i,go=new i,xo=new i,zo=new i,vo=new i,Mo=new i,jo=new i,ko=new i,Io=new i,Co=new i,No=[],Oo=[],Po=new i,Ao=new i,So=[],Bo=new i,Lo=new i,Do=new i,Eo=new z,Fo={16:function(t,i,s,h){var o=t.f+i.f;const r=t.position,f=i.position;n(Xs,f,r);const c=Xs.length(),l=t.b.b+i.b.b;c-o>=l||((o=$a(lf.O)).h=t,o.j=i,s?o.s=!0:(1e-5>c?o.c.set(0,1,0):e(o.c,Xs,1/c),o.g=l-c,e(o.b,o.c,t.b.b),e(o.a,o.c,-i.b.b),a(o.f,o.b,o.a),o.f.add(r),o.f.add(f),o.f.scale(.5)),h.add(o))},17:function(t,i,e,s){var h=t.f+i.f;let o=t,r=i;16!==t.b.Y&&(o=i,r=t),qs.set(0,r.b.f,0),Us.set(0,-r.b.f,0),m(r.transform,qs),m(r.transform,Us),U(qs,Us,o.position,Ws),t=c(Ws,o.position),(t=o.b.b+r.b.b-t)<=-h+Number.EPSILON||((h=$a(lf.O)).h=o,h.j=r,e?h.s=!0:(h.g=t,n(h.c,Ws,o.position),e=h.c.length(),1e-5>Math.abs(e)?h.c.set(0,1,0):h.c.scale(1/e),h.b.l(h.c),h.b.scale(o.b.b),h.b.add(o.position),h.a.l(h.c),h.a.scale(-r.b.b),h.a.add(Ws),a(h.f,h.b,h.a),h.f.scale(.5),m(o.c,h.b),m(r.c,h.a)),s.add(h))},20:function(t,i,s,o){var r=t,f=i;if(16!==t.b.Y&&(r=i,f=t),t=f,ke.J(r.position),ht(t,ke,Ys,Ie))i=r.f+f.f,n($s,Ys,r.position),(t=h(Qs,$s,Number.EPSILON))+Number.EPSILON>=r.b.b+i||((i=$a(lf.O)).h=r,i.j=f,s?i.s=!0:(i.g=r.b.b-t,i.c.l(Qs),e(i.b,Qs,r.b.b),i.b.add(r.position),i.a.l(Ys),a(i.f,i.b,i.a),i.f.scale(.5),m(r.c,i.b),m(f.c,i.a)),o.add(i));else{if((t=$a(lf.O)).h=r,t.j=f,s)t.s=!0;else{(s=$a(lf.Z)).J(r),cf[lf.Z].push(s),(i=$a(lf.Z)).J(f),cf[lf.Z].push(i);var c=_a(f);if(0===(s=yi(s,i,c,c.length,Zs)))throw Error("Center of the sphere is inside the complex hull, but SAT thinks that they do not overlap.");t.g=s,e(t.c,Zs,-1),e(t.b,t.c,r.b.b),t.b.add(r.position),e(t.a,Zs,s-r.b.b),t.a.add(r.position),a(t.f,t.b,t.a),t.f.scale(.5),m(r.c,t.b),m(f.c,t.a),Qa()}o.add(t)}},1:function(t,i,a,s){var h=t.f+i.f;th.set(0,t.b.f,0),ih.set(0,-t.b.f,0),m(t.transform,th),m(t.transform,ih),ah.set(0,i.b.f,0),nh.set(0,-i.b.f,0),m(i.transform,ah),m(i.transform,nh);var o=Math.sqrt(X(th,ih,ah,nh,eh,sh)),r=t.b.b+i.b.b;o>r+h||((h=$a(lf.O)).h=t,h.j=i,a?(h.s=!0,s.add(h)):(1e-5>o?h.c.set(0,1,0):(n(h.c,sh,eh),h.c.normalize()),h.g=r-o,n(hh,ih,th),hh.normalize(),n(oh,nh,ah),oh.normalize(),a=hh,(a=.99999<(a=Math.abs(a.i(oh)))&&1.00001>a)?(a=Z(th,rh),o=-Z(ih,fh),0>a||0>o?(Ji(h,eh,sh),s.add(h)):((r=$a(lf.O)).h=t,r.j=i,r.c.l(h.c),r.g=h.g,0===a?Ji(h,th,rh):(e(eh,hh,a),eh.add(th),Ji(h,eh,rh)),0===o?Ji(r,ih,fh):(e(eh,hh,-o),eh.add(ih),Ji(r,eh,fh)),s.add(h),s.add(r))):(Ji(h,eh,sh),s.add(h))))},5:function(t,i,a,s){var h=t,r=i;if(1!==t.b.Y&&(h=i,r=t),_h.set(0,h.b.f,0),Rh.set(0,-h.b.f,0),m(h.transform,_h),m(h.transform,Rh),t=r,Ce.J(_h,Rh),ht(t,Ce,Vh,qh)){if(t=r,i=h.f+t.f,U(_h,Rh,Vh,Sh),n(Bh,Vh,Sh),r=Bh.normalize(Number.EPSILON),!((r=h.b.b-r)<=-i+Number.EPSILON))if((i=$a(lf.O)).h=h,i.j=t,a)i.s=!0,s.add(i);else if(i.g=r,i.c.l(Bh),n(Th,Rh,_h),Th.normalize(),a=Th.i(Bh),.01<Math.abs(a))Hi(i,Sh,Vh),s.add(i);else{{var f=(a=t.j).x,c=a.y,b=a.z;const i=a.w;0==(f=f*f+c*c+b*b+i*i)?Lh.x=Lh.y=Lh.z=Lh.w=0:(f=-1/f,Lh.x=a.x*f,Lh.y=a.y*f,Lh.z=a.z*f,Lh.w=a.w*-f)}for(Lh.A(Bh,Dh),Dh.scale(-1),a=null,f=Vt(t.b),c=0;c<f.length;c++)if(b=f[c],l(b.o,Dh,.01)){a=b;break}null===a?(Hi(i,Sh,Vh),s.add(i)):(t.c.A(_h,Eh),t.c.A(Rh,Fh),a=Ki(Eh,Fh,a,Gh,Jh),t.transform.A(Gh,Hh),t.transform.A(Jh,Kh),a?((a=$a(lf.O)).h=h,a.j=t,a.c.l(i.c),a.g=i.g,e(i.a,Bh,h.b.b-r),i.a.add(Hh),e(a.a,Bh,h.b.b-r),a.a.add(Kh),Hi(i,Hh,i.a),Hi(a,Kh,a.a),s.add(i),s.add(a)):(Hi(i,Sh,Vh),s.add(i)))}}else if(t=h,h=r,a)(r=$a(lf.O)).h=t,r.j=h,r.s=!0,s.add(r);else{for(n(Oh,_h,Rh),Oh.normalize(),a=_a(h),r=qt(h.b).length,i=Ut(h.b),Ni(Ph,r+i.length),f=0;f<a.length;f++)Ph[f].l(a[f]);for(a=0;a<i.length;a++)f=Ph[r],h.j.A(i[a],f),o(f,Oh),f.normalize(),f.V()||r++;if((i=$a(lf.Z)).J(t),cf[lf.Z].push(i),a=Ta(h),0===(r=yi(i,a,Ph,r,Nh)))throw Error("Inner segment of the capsule overlaps convex hull, but SAT does not think so.");if(w(h.c,Nh,Ah),null!==(c=Si(Ah,h)))n(zh,_h,Rh),zh.normalize(),i=_h.i(Nh)<Rh.i(Nh)?_h:Rh,a=$a(lf.O),f=$a(lf.O),a.h=f.h=t,a.j=f.j=h,a.g=f.g=r,e(a.c,Nh,-1),e(f.c,Nh,-1),e(a.a,a.c,-(r-t.b.b)),f.a.l(a.a),t=zh.i(a.c),.01<Math.abs(t)?(a.a.add(i),Hi(a,i,a.a),f.F(),s.add(a)):(h.c.A(_h,vh),h.c.A(Rh,Mh),t=Ki(vh,Mh,c,jh,kh),h.transform.A(jh,Ih),h.transform.A(kh,Ch),t?(a.a.add(Ih),f.a.add(Ch),Hi(a,Ih,a.a),Hi(f,Ch,f.a),s.add(a),s.add(f)):(a.a.add(i),Hi(a,i,a.a),f.F(),s.add(a)));else{if(w(h.c,Nh,Ah),null===(i=Yt(h.b,Ah)))throw Error("Deep contact: cannot find reference face nor reference edge");if(h.transform.A(i.c.a.position,yh),h.transform.A(i.a.position,dh),e(mh,Nh,-(r-t.b.b)),wh.l(mh),mh.add(yh),wh.add(dh),!Q(_h,Rh,mh,wh,gh))throw Error("Cannot find an intersection between shifted edge and inner segment");(i=$a(lf.O)).h=t,i.j=h,e(i.c,Nh,-1),i.g=r,e(xh,Nh,r-t.b.b),xh.add(gh),Hi(i,gh,xh),s.add(i)}Qa()}},4:function(t,n,s,h){var o,r=t.f+n.f,f=Ut(t.b).length,c=Ut(n.b).length,l=qt(t.b).length,b=qt(n.b).length,u=Ta(t),p=Ta(n),y=t.g.a&n.g.a&65536&&Uh.get(t.b.c+(n.b.c<<16))||null;if((o=null===y)||(u.a(y,ms),p.a(y,ws),o=!(Math.max(0,Math.min(ms[1],ws[1])-Math.max(ms[0],ws[0]))<=Number.EPSILON)),o)if(y=_a(t),0===(l=yi(p,u,y,l,ro,r)))Ti(t,n,ro);else if(y=_a(n),0===(y=yi(u,p,y,b,fo,r)))Ti(t,n,fo);else{if(b=0,1024>f*c&&0===(b=_i(t,n,u,p,co,r)))return void Ti(t,n,co);if(s)(r=$a(lf.O)).h=t,r.j=n,r.s=!0,h.add(r);else if(0===b||Math.abs(l)-1e-5<Math.abs(b)||Math.abs(y)-1e-5<Math.abs(b)){if(c=t,f=n,s=ro,l>=y+1e-5&&(c=n,f=t,s=fo),w(c.c,s,bo),null===(p=Si(bo,c)))throw Error("Cannot find reference face");w(f.c,s,bo),u=Bi(bo,f),t=c,n=f,f=p,c=u,t.j.A(f.o,Wh),u=0,p=f.a;do{Xh.length===u&&Xh.push(new i),t.transform.A(p.a.position,Xh[u]),u++,p=p.b}while(p!==f.a);l=0,p=c.a;do{Yh.length===l&&Yh.push(new i),n.transform.A(p.a.position,Yh[l]),l++,p=p.b}while(p!==c.a);if(0!==(c=Oi(Yh,l,Xh,u,Wh)).length)for(t.transform.A(f.b,oo),f=oo.i(s),u=0;u<c.length;u++)(l=(p=c[u]).i(s)-f)>=r||(l=-l,(b=$a(lf.O)).h=t,b.j=n,b.g=l,b.c.l(s),e(b.b,s,l),b.b.add(p),b.a.l(p),a(b.f,b.b,b.a),b.f.scale(.5),m(b.h.c,b.b),m(b.j.c,b.a),h.add(b));Qa()}else w(t.c,co,lo),lo.scale(-1),r=Yt(t.b,lo),w(n.c,co,lo),s=Yt(n.b,lo),f=b,t.transform.A(r.a.position,io),t.transform.A(r.c.a.position,ao),n.transform.A(s.a.position,no),n.transform.A(s.c.a.position,eo),e(so,co,f),io.add(so),ao.add(so),Q(io,ao,no,eo,ho)?((r=$a(lf.O)).h=t,r.j=n,r.g=f,e(r.c,co,-1),e(r.b,so,-1),r.b.add(ho),r.a.l(ho),a(r.f,r.b,r.a),r.f.scale(.5),m(r.h.c,r.b),m(r.j.c,r.a),Qa(),h.add(r)):Qa()}},24:function(t,i,a,n){Yi(t,i,Ri,a,n)},9:function(t,i,a,n){Yi(t,i,Vi,a,n)},12:function(t,i,a,n){Yi(t,i,Ui,a,n)},8:function(t,i,a,n){Yi(t,i,Ii,a,n)}};Zi.prototype.c=function(t,i,a){if(k(t.h,i.h,t.f+i.f)){var n=as[(7&t.a)+(t.b.N?16:8)][(7&i.a)+(i.b.N?16:8)];if(0!==n&&!(Qo.j[t.b.j]&1<<i.b.j||ua(t.b,i.b))){n=1===n;var e=Fo[t.b.Y|i.b.Y],s=e;if(e=a.length,s(t,i,n,a),e!==(t=a.length))for(i=e;i<t;i++)(n=a.buffer[i]).C=n.h.b,n.B=n.j.b,e=n.h,m(e.m.transform,n.b),n.b.S(e.g.na()),n.v=e.g,n.h=null,e=n.j,m(e.m.transform,n.a),n.a.S(e.g.na()),n.H=e.g,n.j=null,n.v.id<n.H.id||qa(n),n.s||(e=n.C,s=n.B,n.R=null===e.a&&null===s.a?0:null===e.a?Ci(0,s.a.a,0,s.a.b):null===s.a?Ci(e.a.a,0,e.a.b,0):Ci(e.a.a,s.a.a,e.a.b,s.a.b),e=n.C,s=n.B,n.P=null===e.a&&null===s.a?.6:null===e.a?Ci(0,s.a.f,.6,s.a.c):null===s.a?Ci(e.a.f,0,e.a.c,.6):Ci(e.a.f,s.a.f,e.a.c,s.a.c))}}},Zi.prototype.f=function(t,i){var s=t.c;t=t.f;for(var h=0;h<this.a.b;h++){var o=this.a.a[h];if(o.c.a&o.f.a&65536){for(var r=!!(o.c.a&o.f.a&512),f=0;f<o.b.length;f++){var l=o.b.buffer[f];l.m&=~(af|nf|ef),l.m|=r?nf:ef}if(!r)for(r=0;r<o.a.length;r++){l=(f=o.a[r]).v;var b=f.H,u=f.C,p=f.B;u.m&&p.m?u.N||p.N||ua(u,p)?(Bt(o,r),r--):(Ma(l).A(f.b,Ze),Ma(b).A(f.a,$e),a(f.f,Ze,$e),f.f.scale(.5),n(Qe,Ze,$e),f.g=Qe.i(f.c),-5e-4>f.g?(Bt(o,r),r--):(e(Qe,f.c,Math.abs(f.g)),n(Qe,Ze,Qe),n(Qe,$e,Qe),5e-4<(l=Qe.length())/Math.abs(f.g)&&5e-4<l?(Bt(o,r),r--):Ft(o,f))):(Bt(o,r),r--)}}else Lt(o)}for(o=0;o<t.length;o++){for(r=(h=t.buffer[o]).pop(),f=[],l=0;l<h.length;l++)for(b=Da(h[l]),u=0;u<b.length;u++)(p=b.buffer[u]).b.N||f.push(p);0!==f.length&&jt(r,f,i)}for(this.b.clear(),i=0;i<s.length;i+=2)32&((t=s.buffer[i]).a|t.a)||$i(this,t,s.buffer[i+1],this.b);for(s=0;s<this.b.length;s++)if(t=this.b.buffer[s],o=this.a,h=t.v,r=t.H,(i=o.cache.get(Ht(h,r)))||((i=$a(lf.Ca)).c=h,i.f=r,(h=i).g=Ht(h.c,h.f),o.cache.set(h.g,h),o.a.length>o.b?o.a[o.b]=h:o.a.push(h),o.b++),Ft(i,t),!t.s)if(4>i.a.length)i.a.push(t);else{r=i,o=-1,l=(f=t).g,b=1/0,h=-1,u=r.a[0].g,p=!0;for(var y=0;4>y;y++){var d=r.a[y];if(d.g+1e-5>l&&(l=d.g,o=y),f.g>d.g+1e-5){var m=f.g-d.g;const t=c(f.f,d.f);t<m+1e-5&&t<b&&(b=t,h=y)}p&&1e-5<Math.abs(d.g-u)&&(p=!1)}p&&-1!==o&&(o=-2),d=!1,1e-5>(l=Dt(r.a[0],r.a[1],r.a[2],r.a[3]))&&(d=!0,l=Et(r.a[0],r.a[1],r.a[2],r.a[3])),m=Dt(f,r.a[1],r.a[2],r.a[3]),d&&1e-5<m&&(l=0,o=-1),p=u=b=y=0,0!==o&&(y=d?Et(f,r.a[1],r.a[2],r.a[3]):m),1!==o&&(b=d?Et(f,r.a[0],r.a[2],r.a[3]):Dt(f,r.a[0],r.a[2],r.a[3])),2!==o&&(u=d?Et(f,r.a[0],r.a[1],r.a[3]):Dt(f,r.a[0],r.a[1],r.a[3])),3!==o&&(p=d?Et(f,r.a[0],r.a[1],r.a[2]):Dt(f,r.a[0],r.a[1],r.a[2])),r=0,b>(f=y)&&(r=1,f=b),u>f&&(r=2,f=u),p>f&&(r=3,f=p),-1===(o=-1===o?r:1e-5>Math.abs(l-f)&&-1!==h?h:f>l+1e-5?r:-1)?t.F():(i.a[o].F(),i.a[o]=t)}for(s=0;s<this.a.b;s++)0===(i=this.a.a[s]).a.length&&0===i.b.length&&(Jt(this.a,s),s--)},t.k=Qi.prototype,t.k.Xa=function(){const t=sf,i=this.b,a=i+11;for(let i=0;12>i;i++)t[a+i]=0;t[i+2]=0,t[i+7]=0,t[i+8]=0,t[i+9]=0,t[i]=0,t[i+5]=0,t[i+3]=-1/0,t[i+4]=1/0,t[i+6]=0,t[i+10]=0,this.g=null,this.f=this.c=this.a=0},t.k.Zb=function(t){this.a=t?1|this.a:-2&this.a},t.k.ka=function(t,i,a,n,e,s){const h=sf,o=this.b+11;h[o]=t,h[o+1]=i,h[o+2]=a,h[o+3]=n,h[o+4]=e,h[o+5]=s},t.k.Rb=function(){return sf[this.b+7]},t.k.kc=function(t){sf[this.b+7]=t},t.k.oc=function(t){sf[this.b+5]=t},t.k.sc=function(t){sf[this.b+3]=t},t.k.tc=function(t){sf[this.b+4]=t},t.k.la=function(t,i,a,n,e,s){const h=sf,o=this.b+11;h[o+6]=t,h[o+7]=i,h[o+8]=a,h[o+9]=n,h[o+10]=e,h[o+11]=s},t.k.tb=function(){ta(this,6,12)},t.k.ic=function(){ta(this,0,6)},t.k.tb=function(){ta(this,6,12)},t.k.cc=function(){sf[this.b+9]=0},t.k.ib=function(t){const i=sf;var a=this.b;const n=a+11;if(a+=23,2&this.a){var e=t.B;i[a]=e*i[n],i[a+1]=e*i[n+1],i[a+2]=e*i[n+2],Go.x=i[n+3],Go.y=i[n+4],Go.z=i[n+5],S(t.a.aa(),Go),i[a+3]=Go.x/t.g,i[a+4]=Go.y/t.g,i[a+5]=Go.z/t.g}else i[a]=i[a+1]=i[a+2]=0,i[a+3]=i[a+4]=i[a+5]=0;4&this.a?(e=t.C,i[a+6]=e*i[n+6],i[a+7]=e*i[n+7],i[a+8]=e*i[n+8],Go.x=i[n+9],Go.y=i[n+10],Go.z=i[n+11],S(t.b.aa(),Go),i[a+9]=Go.x/t.h,i[a+10]=Go.y/t.h,i[a+11]=Go.z/t.h):(i[a+6]=i[a+7]=i[a+8]=0,i[a+9]=i[a+10]=i[a+11]=0)},t.k.jb=function(t){const i=sf,a=this.b,n=a+11,e=a+23;i[a+2]=1/(i[n]*i[e]+i[n+1]*i[e+1]+i[n+2]*i[e+2]+i[n+3]*i[e+3]+i[n+4]*i[e+4]+i[n+5]*i[e+5]+i[n+6]*i[e+6]+i[n+7]*i[e+7]+i[n+8]*i[e+8]+i[n+9]*i[e+9]+i[n+10]*i[e+10]+i[n+11]*i[e+11]+i[a+5]/t)},t.k.kb=function(t,i){if(2&this.a){var a=t.B,n=t.a,e=n.g,s=n.f;n=n.m,Ho[0]=e.x+a*n.x,Ho[1]=e.y+a*n.y,Ho[2]=e.z+a*n.z,Jo.l(t.a.j),S(t.a.aa(),Jo),Ho[3]=s.x+Jo.x/t.g,Ho[4]=s.y+Jo.y/t.g,Ho[5]=s.z+Jo.z/t.g}else Ho[0]=0,Ho[1]=0,Ho[2]=0,Ho[3]=0,Ho[4]=0,Ho[5]=0;4&this.a?(a=t.C,e=(n=t.b).g,s=n.f,n=n.m,Ho[6]=e.x+a*n.x,Ho[7]=e.y+a*n.y,Ho[8]=e.z+a*n.z,Jo.l(t.b.j),S(t.b.aa(),Jo),Ho[9]=s.x+Jo.x/t.h,Ho[10]=s.y+Jo.y/t.h,Ho[11]=s.z+Jo.z/t.h):(Ho[6]=0,Ho[7]=0,Ho[8]=0,Ho[9]=0,Ho[10]=0,Ho[11]=0),e=(t=sf)[e=(a=this.b)+11]*Ho[0]+t[e+1]*Ho[1]+t[e+2]*Ho[2]+t[e+3]*Ho[3]+t[e+4]*Ho[4]+t[e+5]*Ho[5]+t[e+6]*Ho[6]+t[e+7]*Ho[7]+t[e+8]*Ho[8]+t[e+9]*Ho[9]+t[e+10]*Ho[10]+t[e+11]*Ho[11],i=((s=t[a+7])-e-t[a+5]*t[a+9])/i,1&this.a&&0<s?(e=x(s/(s-e),0,1),t[a+10]=e):t[a+10]=0,t[a]=i},t.k.pb=function(t){const i=sf,a=this.b+11;if(2&this.a){const n=t.a;n.c&&(i[a]*=1&n.c?0:1,i[a+1]*=2&n.c?0:1,i[a+2]*=4&n.c?0:1),64&n.a?(i[a+3]=0,i[a+4]=0,i[a+5]=0):n.h&&(Ko.set(i[a+3],i[a+4],i[a+5]),ja(n).U(Ko),Ko.x*=1&n.h?0:1,Ko.y*=2&n.h?0:1,Ko.z*=4&n.h?0:1,Ma(n).U(Ko),i[a+3]=Ko.x,i[a+4]=Ko.y,i[a+5]=Ko.z)}4&this.a&&((t=t.b).c&&(i[a+6]*=1&t.c?0:1,i[a+7]*=2&t.c?0:1,i[a+8]*=4&t.c?0:1),64&t.a?(i[a+9]=0,i[a+10]=0,i[a+11]=0):t.h&&(Ko.set(i[a+9],i[a+10],i[a+11]),ja(t).U(Ko),Ko.x*=1&t.h?0:1,Ko.y*=2&t.h?0:1,Ko.z*=4&t.h?0:1,Ma(t).U(Ko),i[a+9]=Ko.x,i[a+10]=Ko.y,i[a+11]=Ko.z))},t.k.lb=function(t){const i=sf;this.g=t,this.a=t.j?2|this.a:-3&this.a,this.a=t.m?4|this.a:-5&this.a,this.c=t.a.Ha,this.f=t.b?t.b.Ha:0,i[this.b+1]=t.H};var Go=new i,Jo=new i,Ho=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Ko=new i;t.k=ia.prototype,t.k.Ma=function(){this.active=!0,na(this),ea(this)},t.k.ja=function(){if(this.active=!1,na(this),this.v){var t=this.a,i=this.b;t&&i&&pa(t,i,!1)}},t.k.hb=function(){return!0},t.k.lc=function(t){if(this.a!==t){var i=this.a;if(this.a=t,i&&i.M(!0),t&&t.M(!0),ea(this),i&&this.b&&pa(i,this.b,!1),this.f){var a=this.f;i&&et(a.c.buffer[i.id],this),t&&fa(a,this,t)}}},t.k.mc=function(t){if(this.b!==t){var i=this.b;if(this.b=t,i&&i.M(!0),t&&t.M(!0),ea(this),i&&this.a&&pa(i,this.a,!1),this.f){var a=this.f;i&&et(a.c.buffer[i.id],this),t&&fa(a,this,t)}}},t.k.pc=function(t){this.v!==t&&(this.v=t,ea(this),na(this))},ia.prototype.update=function(){throw Error("Not implemented")},ia.prototype.R=function(){this.j=!!(1&this.a.a)&&1/0!==this.a.B,this.m=null!==this.b&&!!(1&this.b.a)&&1/0!==this.b.B;let t=0;if(this.j){var i=this.a.B*this.g;this.B=1/i,t+=i}this.m&&(i=this.b.B*this.h,this.C=1/i,t+=i),this.H=1/t},(sa.prototype=Object.create(ia.prototype)).hb=function(){var t=this.j,i=this.m;const a=this.K.c;return this.j&&this.a.c&&(t=!(1&(t=this.a.c)&&!(.99999>Math.abs(a.x))||2&t&&!(.99999>Math.abs(a.y))||4&t&&!(.99999>Math.abs(a.z)))),this.m&&this.b.c&&(i=!(1&(i=this.b.c)&&!(.99999>Math.abs(a.x))||2&i&&!(.99999>Math.abs(a.y))||4&i&&!(.99999>Math.abs(a.z)))),t||i},sa.prototype.ja=function(){ia.prototype.ja.call(this),null!==this.f&&ca(this.f,this)},sa.prototype.update=function(t){const i=sf,a=this.c[0],n=a.b;var e=this.K;const s=e.c,h=this.a,r=this.b;this.j?(Ma(h).A(e.b,To),To.S(h.W()),o(To,s),a.ka(-s.x,-s.y,-s.z,-To.x,-To.y,-To.z)):a.ka(0,0,0,0,0,0),this.m?(Ma(r).A(e.a,To),To.S(r.W()),o(To,s),a.la(s.x,s.y,s.z,To.x,To.y,To.z)):a.la(0,0,0,0,0,0);var f=e.R;const c=e.g,l=0>c;let b=0;this.j&&(0<f||l)&&(h.Pa(e.b,To),b+=To.i(s)),this.m&&(0<f||l)&&(r.Pa(e.a,To),b-=To.i(s)),e=0<f&&2<b,l?(e?i[n+7]=b*f:(-.05>(f=c/t)&&(f*=.8),i[n+7]=f),a.a&=-2):(t=15*c,e?(i[n+7]=Math.max(b*f,t),a.a&=-2):(i[n+7]=t,a.a|=1))};var To=new i;(ha.prototype=Object.create(ia.prototype)).ja=function(){ia.prototype.ja.call(this),null!==this.f&&ca(this.f,this)},ha.prototype.update=function(){var t=this.c[0];const i=this.c[1],a=sf,n=t.b,e=i.b,s=this.K;var h=this.a,o=this.b;Ma(h).A(s.b,_o),_o.S(h.W()),Ma(o).A(s.a,Ro),Ro.S(o.W()),h=s.c,o=Vo;var f=qo;if(.7071067811865476<Math.abs(h.z)){var c=-h.y*h.y+h.z*h.z,l=1/Math.sqrt(c);o.set(0,-h.z*l,h.y*l),f.set(c*l,-h.x*o.z,h.x*o.y)}else c=h.x*h.x+h.y*h.y,l=1/Math.sqrt(c),o.set(-h.y*l,h.x*l,0),f.set(-h.z*o.y,h.z*o.x,c*l);this.j?(r(Uo,_o,Vo),t.ka(-Vo.x,-Vo.y,-Vo.z,-Uo.x,-Uo.y,-Uo.z),r(Uo,_o,qo),i.ka(-qo.x,-qo.y,-qo.z,-Uo.x,-Uo.y,-Uo.z)):(t.ka(0,0,0,0,0,0),i.ka(0,0,0,0,0,0)),this.m?(r(Uo,Ro,Vo),t.la(Vo.x,Vo.y,Vo.z,Uo.x,Uo.y,Uo.z),r(Uo,Ro,qo),i.la(qo.x,qo.y,qo.z,Uo.x,Uo.y,Uo.z)):(t.la(0,0,0,0,0,0),i.la(0,0,0,0,0,0)),t=2*s.P,a[n+6]=t,a[e+6]=t,t=4/this.P*19.6/this.H,a[n+3]=-t,a[e+3]=-t,a[n+7]=0,a[e+7]=0};var _o=new i,Ro=new i,Vo=new i,qo=new i,Uo=new i;t.k=oa.prototype,t.k.sb=function(t){for(let s=0;s<t.b;s++){const h=t.a[s];for(let t=0;t<h.a.length;t++){const s=h.a[t];var i=null===s.K,a=0<s.P&&null===s.L&&-.01<s.g;if(!i&&a&&(ca(this,s.K),ra(this,s.K)),i){var n=$a(lf.Ba);{var e=s;aa(i=n),i.a=e.v,i.b=e.H,i.K=e,e=sf;const t=i.c[0].b;e[t+3]=0,e[t+4]=1/0,ia.prototype.Ma.call(i)}ra(this,n),s.K=n}a&&(a=n=$a(lf.Da),i=s,aa(a),a.a=i.v,a.b=i.H,a.K=i,ia.prototype.Ma.call(a),ra(this,n),s.L=n),s.L&&(s.L.P=h.a.length)}}},t.k.qb=function(t,i){this.b.clear(),this.a.clear(),this.a.add(0);for(let e=0;e<t.length;e++){var a=t[e];if(1&a.a&&!(128&a.a)&&(Wo.clear(),Xo.clear(),Wo.add(a),this.Oa(a,Wo,Xo,!0),0!==Xo.length)){a=!0;for(var n=0;n<Wo.length;n++){const t=Wo.buffer[n];1&t.a||(t.a&=-129),512&t.a||(a=!1)}if(!a){for(a=0;a<Wo.length;a++)1&(n=Wo.buffer[a]).a&&n.M();for(a=this.b.length,n=0;n<Xo.length;n++)this.rb(Xo.buffer[n],i);a!==(n=this.b.length)&&this.a.add(n)}}}1===this.a.length&&this.a.clear()},t.k.Oa=function(t,i,a,n){if(t.a|=128,t.a|=256,!(this.c.buffer.length<=t.id)){var e=this.c.buffer[t.id];if(e&&0!==e.length){var s=i.length;for(let n=0;n<e.length;n++){const s=e.buffer[n];if(!s.active)continue;const h=s.a===t?s.b:s.a;h?256&h.a||(128&h.a||(i.add(h),h.a|=128),a.add(s)):a.add(s)}if(n)for(t=s;t<i.length;t++)1&(n=i.buffer[t]).a&&!(256&n.a)&&this.Oa(n,i,a,!1)}}},t.k.rb=function(t,i){if(t.s=0,t.R(),t.hb()){t.update(i);var a=sf;for(let n=0;n<t.c.length;n++){const e=t.c[n],s=e.b;a[s+8]=0,e.lb(t),e.pb(t),e.ib(t),e.jb(i),e.kb(t,i),a[s+2]<1/1e-5&&this.b.add(e)}}},t.k.vb=function(t){if(0!==this.a.length)for(let i=0;i<this.a.length-1;i++)this.wb(t,this.a.buffer[i],this.a.buffer[i+1])},t.k.wb=function(t,i,a){const n=sf;t=1/t;const e=this.b.buffer;for(var s=i;s<a;s++){var h=e[s],o=h.b,r=n[o+9];if(n[o+8]=r,0!==r){var f=h.c,c=h.f;o+=23,2&(h=h.a)&&(n[f]+=r*n[o],n[f+1]+=r*n[o+1],n[f+2]+=r*n[o+2],n[f+3]+=r*n[o+3],n[f+4]+=r*n[o+4],n[f+5]+=r*n[o+5]),4&h&&(n[c]+=r*n[o+6],n[c+1]+=r*n[o+7],n[c+2]+=r*n[o+8],n[c+3]+=r*n[o+9],n[c+4]+=r*n[o+10],n[c+5]+=r*n[o+11])}}for(s=0;s<this.f;s++){for(r=0,f=-0,c=i;c<a;c++){var l=e[c];h=!!(2&(o=l.a)),o=!!(4&o);const i=l.c,a=l.f;var b=(l=l.b)+11;const s=l+23;var u=n[l];const y=n[l+1];var p=n[l+2];const d=n[l+6];let m=n[l+3],w=n[l+4];0!==d&&(m=Math.max(m,-f*d),w=-m);const g=n[l+5];let z=-0;h&&(z+=n[b]*n[i]+n[b+1]*n[i+1]+n[b+2]*n[i+2]+n[b+3]*n[i+3]+n[b+4]*n[i+4]+n[b+5]*n[i+5]),o&&(z+=n[b+6]*n[a]+n[b+7]*n[a+1]+n[b+8]*n[a+2]+n[b+9]*n[a+3]+n[b+10]*n[a+4]+n[b+11]*n[a+5]),b=n[l+8],u=x(.99*(u-z)*p+b,m,w),n[l+8]=u,p=u-b,r=Math.max(r,Math.abs(p)*y),g&&(n[l]-=g*p*t),0===d&&(f=u),h&&(n[i]+=p*n[s],n[i+1]+=p*n[s+1],n[i+2]+=p*n[s+2],n[i+3]+=p*n[s+3],n[i+4]+=p*n[s+4],n[i+5]+=p*n[s+5]),o&&(n[a]+=p*n[s+6],n[a+1]+=p*n[s+7],n[a+2]+=p*n[s+8],n[a+3]+=p*n[s+9],n[a+4]+=p*n[s+10],n[a+5]+=p*n[s+11])}if(1e-4>=r)break}},t.k.Ya=function(t){const i=this.b.buffer,a=this.b.length,n=sf;for(let l=0;l<a;l++){var h=i[l];const a=h.g;var o=h.b;const b=o+11,u=n[o+10];var r=n[o+8];if(n[o+9]=r*(1-u),o=h.a,h=a.F!==Number.POSITIVE_INFINITY,2&o){var f=a.B,c=f*r*t;const i=r*t,o=a.a;Yo.x=c*n[b],Yo.y=c*n[b+1],Yo.z=c*n[b+2],o.g.add(Yo),0!==u&&(e(Zo,Yo,u),o.L.add(Zo)),h&&(Yo.scale(1/(f*t)),a.s+=s(Yo)),Zo.x=i*n[b+3],Zo.y=i*n[b+4],Zo.z=i*n[b+5],o.aa().A(Zo,$o),$o.scale(1/a.g),o.f.add($o),0!==u&&($o.scale(u),o.K.add($o))}4&o&&(f=(o=a.C)*r*t,r*=t,c=a.b,Yo.x=f*n[b+6],Yo.y=f*n[b+7],Yo.z=f*n[b+8],c.g.add(Yo),0!==u&&(e(Zo,Yo,u),c.L.add(Zo)),h&&(Yo.scale(1/(o*t)),a.s+=s(Yo)),Zo.x=r*n[b+9],Zo.y=r*n[b+10],Zo.z=r*n[b+11],c.aa().A(Zo,$o),$o.scale(1/a.h),c.f.add($o),0!==u&&($o.scale(u),c.K.add($o))),h&&Math.sqrt(a.s)>a.F&&(a.active=!1)}};var Wo=new pe,Xo=new pe,Yo=new i,Zo=new i,$o=new i;la.prototype.a=function(t){for(let i=0;i<t.b;i++){const a=t.a[i];for(let t=0;t<a.b.length;t++){const i=a.b.buffer[t];i.m&af?i.s?this.g(i):this.b(i):i.m&nf?i.s?this.j(i):this.f(i):i.m&ef&&(i.C.m&&i.B.m&&(i.s?this.h(i):this.c(i)),i.F(),nt(a.b,t),t--)}}};var Qo=null;t.k=ba.prototype,t.k.Fb=function(t){const i=this.f;for(var a=0;a<i.length;a++){var n=i[a],s=!!(1&n.a)&&1/0!==n.B;16&n.a&&s&&(e(yr,this.s,n.B*t),n.m.add(yr)),(s=n).c&&(s.m.x*=1&s.c?0:1,s.m.y*=2&s.c?0:1,s.m.z*=4&s.c?0:1),n.h&&(ja(n).U(n.j),n.j.x*=1&n.h?0:1,n.j.y*=2&n.h?0:1,n.j.z*=4&n.h?0:1,Ma(n).U(n.j))}for(this.a.g(t),this.c.f(this.a,t),this.b.sb(this.c.a),this.b.qb(this.a.b,t),this.b.vb(t),this.b.Ya(t),a=0;a<i.length;a++)n=i[a],vt(n)||Na(n,t);kt(i,t)},t.k.Qb=function(){this.m.a(this.c.a)},t.k.Lb=function(t){if(65536&t.a)throw Error("The body already belongs to a physics world!");t.a|=65536,t.ba(),this.f.push(t);{var i=this.a;i.b.push(t);const a=$a(lf.Ea);a.J(t),i.a.push(a)}},t.k.fc=function(t){for(var i=0;i<this.f.length;i++)if(this.f[i]===t){this.f.splice(i,1),i=this.a;for(var a=t,n=0;n<i.b.length;n++)if(i.b[n]===a){i.b[n]=i.b[i.b.length-1],i.b.pop();break}for(n=0;n<i.a.length;n++)if(i.a[n].body===a){bf(lf.Ea,i.a[n]),i.a[n]=i.a[i.a.length-1],i.a.pop();break}break}for(t.a&=-65537,i=this.c,a=0;a<i.a.b;a++)((n=i.a.a[a]).c===t||n.f===t)&&(Jt(i.a,a),a--)},t.k.Db=function(t){ra(this.b,t)},t.k.Eb=function(t){ca(this.b,t)},t.k.vc=function(t,i,a,n){return 0!==(t=this.Ua(t,i,1,a,n)).length&&(t[0].c(),!0)},t.k.dc=function(t,i,a,n){if(0===(t=this.Ua(t,i,Number.MAX_SAFE_INTEGER,a,n)).length)return null;for(i=t[0],a=1;a<t.length;a++)(n=t[a]).a<i.a?(i.c(),i=n):n.c();return i},t.k.Ua=function(t,i,a,n,e){tr.set(t.x,t.y,t.z),ir.set(i.x,i.y,i.z);{t=this.a,i=tr;var s=ir;const h=[];for(let o=0;o<t.b.length;o++){const r=t.b[o];if(0!=(r.b.f&n)&&I(va(r),i,s)&&(r.ab(i,s,a,n,e,h),h.length>=a))break}for(;h.length>a;)h.pop().c();a=h}return a},t.k.uc=function(t,i,a,n,e,s){if(0===(t=this.ub(t,i,a,n,Number.MAX_SAFE_INTEGER,e,s)).length)return null;for(i=t[0],a=1;a<t.length;a++)(n=t[a]).a<i.a?(i.c(),i=n):n.c();return i},t.k.ub=function(t,i,a,s,h,o,r){or.set(i.x,i.y,i.z,i.w),rr.set(a.x,a.y,a.z),fr.set(s.x,s.y,s.z),n(cr,fr,rr),s=rr;var f=or;for(a=cr,lr||(lr=new za(-1,1)),(i=lr).oa(s),i.ua(f),da(i.b),i.b.ra(t,en,fn),i.g.l(a),i.H=Pr,i.ba(),t=Da(i).buffer[0],br.l(va(i)),br.Sa(a),a=a.length(),s=At(this.a,br,o),o=[],f=0;f<s.length;f++)for(var l=Da(s[f]),b=0;b<l.length;b++){var u=l.buffer[b];!r&&u.b.N||o.push(u)}for(s=[],l=1,pr.l(i.v);1e-5<l&&s.length<h&&0<o.length&&(f=jt(i,o,l,!0),Ka(t),null!==f);)if(b=o.indexOf(f),o[b]=o[o.length-1],o.pop(),ur.clear(),this.c.c(t,f,ur),0===ur.length);else{for(b=Wa(ur.buffer[0]),u=0;u<ur.length;u++)ur.buffer[u].F();b.s&&!r?b.F():(b.v!==i&&qa(b),l=$a(lf.ha),e(l.o,b.c,-1),l.u.l(b.f),l.b=f.g,l.f=b.B,l.a=c(pr,i.v),s.push(l),b.F(),l=1-l.a/a)}return s},t.k.Wb=function(t,i,a,n,e){ar.set(i.x,i.y,i.z),nr.set(a.x,a.y,a.z,a.w),a=ar;var s=nr;for(er||(er=new za(-1,1)),hr.clear(),(i=er).oa(a),i.ua(s),da(i.b),i.b.ra(t,en,fn),i.ba(),t=At(this.a,va(i),n),n=[],a=0;a<t.length;a++)if(sr.clear(),$i(this.c,i,t[a],sr),0!==sr.length)for(s=0;s<sr.length;s++){const t=sr.buffer[s],a=t.v===i?t.B:t.C;hr.has(a.c)||t.s&&!e||(n.push(a),hr.add(a.c)),t.F()}return n},t.k.Vb=function(t,i,a,n,e,s){dr.set(i.x,i.y,i.z),mr.set(a.x,a.y,a.z,a.w),wr.set(e.x,e.y,e.z),gr.set(s.x,s.y,s.z,s.w);{a=dr,e=mr,s=wr;var h=gr;xr||(xr=new za(-1,1)),zr||(zr=new za(-1,1)),vr.clear();const o=zr;if((i=xr).oa(a),i.ua(e),o.oa(s),o.ua(h),da(i.b),i.b.ra(t,en,fn),i.ba(),da(o.b),o.b.ra(n,en,fn),o.ba(),j(va(i),va(o)))if($i(this.c,i,o,vr),0===vr.length)t=null;else{for(t=1;t<vr.length;t++)vr.buffer[t].F();(t=vr.buffer[0]).v===i&&qa(t)}else t=null}return t},t.k.ac=function(){for(let t=0;t<this.f.length;t++)this.f[t].b.Aa()},t.k.qc=function(t,i,a){const n=Math.min(t.c,i.c);t=Math.max(t.c,i.c),a?this.h.add(n+(t<<16)):0!==this.h.size&&this.h.delete(n+(t<<16))};var tr=new i,ir=new i,ar=new i,nr=new u,er=null,sr=new pe,hr=new Set,or=new u,rr=new i,fr=new i,cr=new i,lr=null,br=new z,ur=new pe,pr=new i,yr=new i,dr=new i,mr=new u,wr=new i,gr=new u,xr=null,zr=null,vr=new pe;ya.prototype=Object.create(N.prototype),t.k=ya.prototype,t.k.ra=function(t,i,a){const n=ma(this,t.c);n?(n.a.m=!1,n.a=t,n.f.l(i),n.c.l(a),n.c.normalize(),R(n)):this.a.push(new _(t,i,a)),t.m=!0,this.Aa(),this.Wa(),ga(this)},t.k.wc=function(t,i,a){if(!(t=ma(this,t)))throw Error("Cannot find shape");t.f.l(i),t.c.l(a),t.c.normalize(),R(t),ga(this)},t.k.ec=function(t){const i=this.a;for(let a=0;a<i.length;a++){const n=i[a];if(n.a.c===t){n.a.m=!1,i[a]=i[i.length-1],i.pop();break}}this.Aa(),this.Wa(),ga(this)},t.k.Aa=function(){const t=Qo.j;this.f=0,this.j=4294967295;for(let i=0;i<this.a.length;i++){const a=this.a[i].a;this.f|=1<<a.j,this.j&=t[a.j]}},t.k.Wa=function(){this.N=!1;for(let t=0;t<this.a.length;t++)if(this.a[t].a.N){this.N=!0;break}};var Mr=new F,jr=new i,kr=new i,Ir=new i,Cr=new i,Nr=new i;Object.defineProperty(za.prototype,"mass",{get(){return this.B},set(t){1e-5>Math.abs(this.B-t)||(this.B=t,this.ya=1/t,this.ba())}}),Object.defineProperty(za.prototype,"isDynamic",{get(){return!!(1&this.a)}}),Object.defineProperty(za.prototype,"isKinematic",{get(){return!!(2&this.a)},set(t){t===!!(2&this.a)||t&&4&this.a||(t?(this.a|=2,this.a&=-2,Sa(this)):(this.a&=-3,4&this.a||(this.a|=1)),this.ba())}}),Object.defineProperty(za.prototype,"isStatic",{get(){return!!(4&this.a)},set(t){t!==!!(4&this.a)&&(t?(this.a|=4,this.a&=-2,this.a&=-3,Sa(this)):(this.a&=-5,2&this.a||(this.a|=1)),this.ba())}}),Object.defineProperty(za.prototype,"useGravity",{get(){return!!(16&this.a)},set(t){t!==!!(16&this.a)&&(this.a=t?16|this.a:-17&this.a,this.M(!0))}}),Object.defineProperty(za.prototype,"disableCollisions",{get(){return!!(8&this.a)},set(t){t!==!!(8&this.a)&&(this.a=t?8|this.a:-9&this.a,this.M(!0))}}),Object.defineProperty(za.prototype,"isSleeping",{get(){return!!(512&this.a)},set(t){this.a=t?512|this.a:-513&this.a}}),Object.defineProperty(za.prototype,"positionLockX",{get(){return!!(1&this.c)},set(t){t!==!!(1&this.c)&&(this.c=t?1|this.c:-2&this.c,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"positionLockY",{get(){return!!(2&this.c)},set(t){t!==!!(2&this.c)&&(this.c=t?2|this.c:-3&this.c,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"positionLockZ",{get(){return!!(4&this.c)},set(t){t!==!!(4&this.c)&&(this.c=t?4|this.c:-5&this.c,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"rotationLockX",{get(){return!!(1&this.h)},set(t){t!==!!(1&this.h)&&(this.h=t?1|this.h:-2&this.h,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"rotationLockY",{get(){return!!(2&this.h)},set(t){t!==!!(2&this.h)&&(this.h=t?2|this.h:-3&this.h,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"rotationLockZ",{get(){return!!(4&this.h)},set(t){t!==!!(4&this.h)&&(this.h=t?4|this.h:-5&this.h,Aa(this),Pa(this),this.M(!0))}}),Object.defineProperty(za.prototype,"_body",{set(){}}),Object.defineProperty(za.prototype,"_entity",{set(){}}),t.k=za.prototype,t.k.na=function(){return wa(this.b)},t.k.aa=function(){if(!(1024&this.a))return this.P;if(1&this.a&&1/0!==this.B){var t=Vr,i=ja(this);t.data[0]=i.a,t.data[1]=i.f,t.data[2]=i.j,t.data[3]=i.b,t.data[4]=i.g,t.data[5]=i.m,t.data[6]=i.c,t.data[7]=i.h,t.data[8]=i.s,B(Vr,qr),qr.multiply(function(t){return 2&t.b&&xa(t),t.c.a}(this.b)),L(this.P,qr,Vr);{i=(t=this.P).data[0];const n=t.data[3],e=t.data[6],s=t.data[1],h=t.data[4],o=t.data[7],r=t.data[2],f=t.data[5],c=t.data[8],l=c*h-o*f,b=-c*s+o*r,u=f*s-h*r;var a=i*l+n*b+e*u;a&&(a=1/a,t.data[0]=l*a,t.data[1]=b*a,t.data[2]=u*a,t.data[3]=(-c*n+e*f)*a,t.data[4]=(c*i-e*r)*a,t.data[5]=(-f*i+n*r)*a,t.data[6]=(o*n-e*h)*a,t.data[7]=(-o*i+e*s)*a,t.data[8]=(h*i-n*s)*a)}}else(t=this.P).data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=1,t.data[5]=0,t.data[6]=0,t.data[7]=0,t.data[8]=1;return this.a&=-1025,this.P},t.k.yb=function(){var t=this.b;return 2&t.b&&xa(t),(t=t.c).g||H(t),t.g},t.k.zb=function(){var t=this.b;return 2&t.b&&xa(t),(t=t.c).f||H(t),t.f},t.k.Xb=function(){return this.v},t.k.oa=function(t){l(this.v,t,Number.EPSILON)||(this.v.l(t),Ea(this))},t.k.W=function(){return 2048&this.a?(this.s.A(this.na(),Lr),this.F.l(this.v),this.F.add(Lr),this.a&=-2049,this.F):this.F},t.k.Ab=function(){return this.s},t.k.ua=function(t){p(t,this.s,Number.EPSILON)||(this.s.l(t),this.s.normalize(),Ea(this))},t.k.Bb=function(t,i){l(this.v,t,Number.EPSILON)&&p(this.s,i,Number.EPSILON)||(this.v.l(t),this.s.l(i),this.s.normalize(),Ea(this))},t.k.Yb=function(t,i){i.x=this.s.x,i.y=this.s.y,i.z=this.s.z,i.w=this.s.w,t.x=this.v.x,t.y=this.v.y,t.z=this.v.z},t.k.bc=function(t){var i=this.b;l(i.h,t)||(i.b|=4,i.b|=2,i.h.l(t)),Ea(this)},t.k.hc=function(){var t=this.b;t.b&=-5,t.b|=2,Ea(this)},t.k.ab=function(t,i,n,e,s,h){ja(this).A(t,Fr),ja(this).A(i,Gr),t=this.b,n-=h.length;var o=Fr,r=Gr;for(i=wa(t),a(kr,o,i),a(Ir,r,i),o=[],r=0;r<t.a.length;r++){const a=t.a[r];if(0!=(e&1<<a.a.j)&&(!a.a.N||s)){a.g.A(kr,Cr),a.g.A(Ir,Nr);var f=a.a;if(I(f.g,Cr,Nr)&&(null!==(f=f.wa(Cr,Nr))&&(f.f=a.a,m(a.transform,f.u),f.u.S(i),o.push(f)),o.length>=n))break}}for(e=o,s=0;s<e.length;s++)(t=e[s]).b=this,m(Ma(this),t.u),Ma(this).U(t.o),h.push(t)},t.k.Kb=function(t){this.g.x+=t.x,this.g.y+=t.y,this.g.z+=t.z,Aa(this),this.a|=16384,this.M(!0)},t.k.Jb=function(t){this.m.x+=t.x,this.m.y+=t.y,this.m.z+=t.z,this.a|=16384,this.M(!0)},t.k.Hb=function(t){this.j.x+=t.x,this.j.y+=t.y,this.j.z+=t.z,this.a|=16384,this.M(!0)},t.k.jc=function(t){this.f.l(t),Pa(this),this.M(!0)},t.k.Ib=function(t){this.f.x+=t.x,this.f.y+=t.y,this.f.z+=t.z,this.a|=16384,this.M(!0)},t.k.rc=function(t){this.g.l(t),Aa(this),this.M(!0)},t.k.Mb=function(t,i){_r.l(i),_r.S(this.W()),o(_r,t),this.m.add(t),this.j.add(_r),this.a|=16384,this.M(!0)},t.k.Pa=function(t,i){Ma(this).A(t,i),this.mb(i,i)},t.k.mb=function(t,i){n(Rr,t,this.W()),r(i,this.f,Rr),i.add(this.g)},t.k.Tb=function(t,i,a){t=ma(this.b,t.c);const n=$a(lf.pa);Ha(n,this,t),ke.J(i),ht(n,ke,a,Ie)||a.l(i),Ra(n)},t.k.Ub=function(t,i,a){t=ma(this.b,t.c);const n=$a(lf.pa);Ha(n,this,t),C(n.h,i,a),Ra(n)},t.k.Sb=function(t,i){if(0===this.b.a.length)i.l(this.v);else{var a=1/0,n=$a(lf.pa);for(let e=0;e<this.b.a.length;e++){Ha(n,this,this.b.a[e]),C(n.h,t,Zr);const s=f(Zr,t);if(1e-5>s)return void i.l(t);s<a&&(a=s,i.l(Zr))}Ra(n)}},t.k.M=function(t=!1){this.a&=-513,t&&(this.$=.1)},t.k.ba=function(){this.a|=2048,this.a|=1024,this.a|=4096,this.a|=8192,this.a|=16384,this.a|=32768,ga(this.b),this.M()};var Or=0,Pr=1,Ar={zc:Or,xc:Pr,yc:2},Sr=class{constructor(t){this.body=t,this.a=new pe}},Br=new y,Lr=new i,Dr=new i,Er=new i,Fr=new i,Gr=new i,Jr=new i,Hr=new i,Kr=new i,Tr=new u,_r=new i,Rr=new i,Vr=new P,qr=new P,Ur=new i,Wr=new i,Xr=new u,Yr=new y,Zr=new i,$r=class{constructor(t){this.a=t,this.b=null,this.f=[],this.c=!1,this.g=[]}};Ja.prototype.T=function(t,i){w(this.c,t,tf),this.b.T(tf,i),m(this.transform,i)};var Qr=new i,tf=new i,af=1,nf=2,ef=4;Va.prototype.F=function(){null!==this.K&&(this.K.ja(),bf(lf.Ba,this.K),this.K=null),null!==this.L&&(this.L.ja(),bf(lf.Da,this.L),this.L=null),this.H=this.v=this.j=this.h=null,this.P=this.R=0,this.s=!1,this.m=0,this.$.set(0,0,0),bf(lf.O,this)};var sf=new Float64Array(524288),hf=0,of=[],rf=[],ff=[],cf=[],lf={Cb:0,O:1,Ca:2,Ba:3,Da:4,ha:5,pa:6,ia:7,Z:8,xa:9,Ja:10,Ia:11,Ka:12,Ea:13},bf=Xa;Za(lf.Cb,(()=>new i)),Za(lf.O,(()=>new Va)),Za(lf.Ca,(()=>new St)),Za(lf.Ba,(()=>new sa)),Za(lf.Da,(()=>new ha)),Za(lf.ha,(()=>new it)),Za(lf.pa,(()=>new Ja)),Za(lf.ia,(()=>new di)),Za(lf.Z,(()=>new mi)),Za(lf.xa,(()=>new gi)),Za(lf.Ja,(()=>new zi)),Za(lf.Ia,(()=>new vi)),Za(lf.Ka,(()=>new Mi)),Za(lf.Ea,(()=>new Ot));var uf={EPSILON:1e-5,RigidBody:za,ConvexHullShape:_t,SphereShape:Gi,CapsuleShape:Fi,MeshShape:wt,AABB:z,Vector3:i,PhysicMaterial:O,Constraint:ia,ConstraintRow:Qi,World:ba,RayIntersection:it,ContactDetails:Va,Quaternion:u,Matrix4:y};"undefined"!=typeof window&&(window.Goblin=uf),tn(i.prototype,{x:"x",y:"y",z:"z"}),an(i.prototype,i.prototype.set,"set"),an(i.prototype,i.prototype.normalize,"normalize"),an(i.prototype,i.prototype.l,"copy"),an(i.prototype,i.prototype.i,"dot"),tn(u.prototype,{x:"x",y:"y",z:"z",w:"w"}),an(u.prototype,u.prototype.set,"set"),an(u.prototype,u.prototype.a,"transformVector3"),an(y.prototype,y.prototype.U,"rotateVector3"),an(y.prototype,y.prototype.qa,"makeTransform"),an(P.prototype,P.prototype.A,"transformVector3Into"),tn(z.prototype,{min:"min",max:"max"}),an(z.prototype,z.prototype.transform,"transform"),an(ba,(function(){if(Qo)throw Error("It is a really bad idea to initialize two worlds in the same time");return Qo=new ba}),"initialize"),tn(ba.prototype,{s:"gravity",b:"solver",m:"eventEmitter",j:"collision_matrix"}),an(ba.prototype,ba.prototype.Lb,"addRigidBody"),an(ba.prototype,ba.prototype.fc,"removeRigidBody"),an(ba.prototype,ba.prototype.Db,"addConstraint"),an(ba.prototype,ba.prototype.Eb,"removeConstraint"),an(ba.prototype,ba.prototype.Fb,"step"),an(ba.prototype,ba.prototype.Qb,"emitEvents"),an(ba.prototype,ba.prototype.ac,"onCollisionMatrixUpdated"),an(ba.prototype,ba.prototype.vc,"testRayIntersectPc"),an(ba.prototype,ba.prototype.dc,"rayIntersectPc"),an(ba.prototype,ba.prototype.Ua,"rayIntersectAllPc"),an(ba.prototype,ba.prototype.uc,"shapeCastPc"),an(ba.prototype,ba.prototype.ub,"shapeCastAllPc"),an(ba.prototype,ba.prototype.Wb,"getIntersectingShapesPc"),an(ba.prototype,ba.prototype.Vb,"getContactPc"),an(ba.prototype,ba.prototype.qc,"setIgnoreCollision"),tn(oa.prototype,{f:"max_iterations"}),an(za,Ar,"CollisionDetectionMode"),tn(za.prototype,{b:"shape",f:"angular_velocity",R:"maxAngularVelocity",g:"linear_velocity",bb:"linear_damping",$a:"angular_damping",H:"collisionDetectionMode"}),an(za.prototype,za.prototype.Yb,"getTransform"),an(za.prototype,za.prototype.Bb,"setTransform"),an(za.prototype,za.prototype.Xb,"getPosition"),an(za.prototype,za.prototype.W,"getCOMAdjustedPosition"),an(za.prototype,za.prototype.oa,"setPosition"),an(za.prototype,za.prototype.Ab,"getRotation"),an(za.prototype,za.prototype.ua,"setRotation"),an(za.prototype,za.prototype.ba,"onShapeUpdated"),an(za.prototype,za.prototype.Jb,"addLinearImpulse"),an(za.prototype,za.prototype.Kb,"addLinearVelocity"),an(za.prototype,za.prototype.Hb,"addAngularImpulse"),an(za.prototype,za.prototype.Ib,"addAngularVelocity"),an(za.prototype,za.prototype.jc,"setAngularVelocity"),an(za.prototype,za.prototype.rc,"setLinearVelocity"),an(za.prototype,za.prototype.Mb,"applyImpulseAtWorldPoint"),an(za.prototype,za.prototype.Pa,"getVelocityInLocalPoint"),an(za.prototype,za.prototype.mb,"getVelocityInGlobalPoint"),an(za.prototype,za.prototype.ab,"rayIntersect"),an(za.prototype,za.prototype.Tb,"getClosestPointOnShape"),an(za.prototype,za.prototype.Ub,"getClosestPointOnShapeBounds"),an(za.prototype,za.prototype.Sb,"getClosestPointOnBounds"),an(za.prototype,za.prototype.M,"wakeUp"),an(za.prototype,za.prototype.aa,"getInverseInertiaTensorWorldFrame"),an(za.prototype,za.prototype.yb,"getDiagonalizedInertiaTensor"),an(za.prototype,za.prototype.zb,"getDiagonalizedInertiaTensorRotation"),an(za.prototype,za.prototype.na,"getCenterOfMass"),an(za.prototype,za.prototype.bc,"overrideCenterOfMass"),an(za.prototype,za.prototype.hc,"resetCenterOfMass"),an(Ar,Or,"Discrete"),an(Ar,Pr,"ContinuousConservativeAdvancement"),an(Ar,2,"ContinuousSpeculative"),tn(N.prototype,{N:"isTrigger",g:"aabb"}),tn(T.prototype,{c:"uid",a:"material",j:"layer"}),tn(ya.prototype,{a:"child_shapes"}),an(ya.prototype,ya.prototype.Aa,"updateLayersMasks"),an(ya.prototype,ya.prototype.Wa,"updateIsTriggerFlag"),an(ya.prototype,ya.prototype.ra,"addChildShape"),an(ya.prototype,ya.prototype.wc,"updateShapeTransform"),an(ya.prototype,ya.prototype.ec,"removeChildShape"),tn(_.prototype,{a:"shape",b:"aabb"}),an(_t,(function(t,a,n,e,s,h){return a=Math.max(a,1e-4),n=Math.max(n,1e-4),e=Math.max(e,1e-4),new _t(t,[new i(a,n,e),new i(a,n,-e),new i(-a,n,-e),new i(-a,n,e),new i(a,-n,e),new i(a,-n,-e),new i(-a,-n,-e),new i(-a,-n,e)],s,!0,h)}),"fromAABB"),an(_t,(function(t){$t(os,t);let a=os.max.x-os.min.x,n=os.max.y-os.min.y,e=os.max.z-os.min.z;if(!(1e-6<a&&1e-6<n&&1e-6<e&&3<t.length)){var s=1/0;1e-6<a&&a<s&&(s=a),1e-6<n&&n<s&&(s=n),1e-6<e&&e<s&&(s=e),1/0===s?e=n=a=.01:(a=1e-6>a?.05*s:a/2,n=1e-6>n?.05*s:n/2,e=1e-6>e?.05*s:e/2),s=(os.min.x+os.max.x)/2;var h=(os.min.y+os.max.y)/2,o=(os.min.z+os.max.z)/2;t.length=0,t.push(new i(a+s,n+h,e+o),new i(a+s,n+h,-e+o),new i(-a+s,n+h,-e+o),new i(-a+s,n+h,e+o),new i(a+s,-n+h,e+o),new i(a+s,-n+h,-e+o),new i(-a+s,-n+h,-e+o),new i(-a+s,-n+h,e+o))}}),"approximateByAABBIfNecessary"),an(_t.prototype,_t.prototype.xb,"getShallowCopy"),an(wt.prototype,wt.prototype.v,"getShallowCopy"),tn(it.prototype,{b:"object",f:"shape",u:"point",o:"normal",a:"distance",g:"triangleIndex",ea:"barycentricCoordinates"}),an(it.prototype,it.prototype.c,"dispose"),tn(O.prototype,{name:"name",b:"bounciness",c:"dynamicFriction",g:"staticFriction",f:"frictionCombine",a:"bounceCombine"}),tn(ia.prototype,{a:"object_a",b:"object_b",c:"rows",j:"objectAIsDynamic",m:"objectBIsDynamic",v:"disablesCollisionBetweenObjects",F:"breakForce",L:"breakTorque",g:"massScaleA",h:"massScaleB"}),an(ia.prototype,ia.prototype.Ma,"activate"),an(ia.prototype,ia.prototype.ja,"deactivate"),an(ia.prototype,ia.prototype.lc,"setBodyA"),an(ia.prototype,ia.prototype.mc,"setBodyB"),an(ia.prototype,ia.prototype.pc,"setDisableCollisionFlag"),an(Qi.prototype,Qi.prototype.Xa,"reset"),an(Qi.prototype,Qi.prototype.Zb,"markAsPositional"),an(Qi.prototype,Qi.prototype.ka,"setJacobianA"),an(Qi.prototype,Qi.prototype.la,"setJacobianB"),an(Qi.prototype,Qi.prototype.Rb,"getBias"),an(Qi.prototype,Qi.prototype.kc,"setBias"),an(Qi.prototype,Qi.prototype.oc,"setCFM"),an(Qi.prototype,Qi.prototype.sc,"setLowerLimit"),an(Qi.prototype,Qi.prototype.tc,"setUpperLimit"),an(Qi.prototype,Qi.prototype.ic,"resetJacobianA"),an(Qi.prototype,Qi.prototype.tb,"resetJacobianB"),an(Qi.prototype,Qi.prototype.cc,"preventWarmStart"),tn(Va.prototype,{v:"bodyA",H:"bodyB",C:"shape_a",B:"shape_b",f:"contact_point",c:"contact_normal",g:"penetration_depth",$:"relativeVelocity"}),an(Va.prototype,Va.prototype.F,"dispose"),tn(la.prototype,{b:"_onCollisionContactEnter",f:"_onCollisionContactStay",c:"_onCollisionContactExit",g:"_onTriggerContactEnter",j:"_onTriggerContactStay",h:"_onTriggerContactExit"}),nn(Pt.prototype.g),nn(Pt.prototype.h),nn(Zi.prototype.f),nn(Zi.prototype.c),nn(la.prototype.a),nn(oa.prototype.sb),nn(oa.prototype.qb),nn(oa.prototype.Oa),nn(oa.prototype.rb),nn(oa.prototype.vb),nn(oa.prototype.wb),nn(oa.prototype.Ya),nn(ia.prototype.R),nn(Qi.prototype.ib),nn(Qi.prototype.jb),nn(Qi.prototype.kb),nn(Qi.prototype.pb),nn(Qi.prototype.lb),nn(kt),nn(_t.prototype.cb),nn(_t.prototype.gb),nn(_t.prototype.fb),nn(_t.prototype.eb),nn(_i)}.call(this||window,window.__wpcc=window.__wpcc||{});